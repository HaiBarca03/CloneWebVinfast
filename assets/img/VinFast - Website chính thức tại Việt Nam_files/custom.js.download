jQuery(document).ready(function(){if(typeof Swiper!=='undefined'){new Swiper(".xe-may-trung-cap",{slidesPerView:4,navigation:{nextEl:".next",prevEl:".prev",},});}
jQuery('.search-block-form input.form-search').addClass('form-control');jQuery('.search-block-form input.form-search').attr('placeholder','Search...');jQuery('.simplenews-subscriber-form input[type="email"]').attr('placeholder','Email Address');jQuery('.google-map').click(function(){jQuery('.google-map iframe').css("pointer-events","auto");});jQuery(".google-map").mouseleave(function(){jQuery('.google-map iframe').css("pointer-events","none");});jQuery('#mainNav > li.dropdown > a').append('<i class="fa fa-caret-down"></i>');jQuery('#mainNav > li.dropdown > a .fa-caret-down').on('click',function(e){e.preventDefault();if(jQuery(window).width()<992){jQuery(this).closest('li').toggleClass('opened');}});jQuery('.webform-submission-contact-advanced-form input[type="submit"]').val('Send Message');jQuery('.webform-submission-contact-footer-form input[type="submit"]').val('Send Message');jQuery('.messages').append('<i class="icon-cancel message-close fa fa-close"></i>');jQuery('body').on('click','.icon-cancel.message-close',function(){jQuery(this).parent().animate({'opacity':'0'},function(){jQuery(this).slideUp();});});jQuery('#webform-submission-contact-form').validate();jQuery('#webform-submission-contact-advanced-form').validate();jQuery('#webform-submission-contact-footer-form').validate();jQuery('.block-simplenews-subscription-block form').validate();jQuery('#webform-submission-contact-form-sidebar-form').validate();var sections=jQuery('section.section');jQuery(window).on('scroll',function(){var cur_pos=jQuery(this).scrollTop();sections.each(function(){});});});function addToCartInList(id){if(jQuery('#commerce-order-item-add-to-cart-form-commerce-product-'+id).length){jQuery('#commerce-order-item-add-to-cart-form-commerce-product-'+id).submit();}}
jQuery(document).ready(function(){var sample_image='<img src="http://placehold.it/85x85" alt="" class="img-responsive"/>';jQuery('ul.comments li .img-thumbnail article').each(function(){if(jQuery(this).find('img').length===0){jQuery(this).append(sample_image);}});var ms_ie=false;var ua=window.navigator.userAgent;var old_ie=ua.indexOf('MSIE');var new_ie=ua.indexOf('Trident/');if((old_ie>-1)||(new_ie>-1)){ms_ie=true;}
if(ms_ie){jQuery('body').addClass('ie');}
jQuery('.write-review-link').click(function(){if(location.pathname.replace(/^\//,'')==this.pathname.replace(/^\//,'')&&location.hostname==this.hostname){var target=jQuery(this.hash);target=target.length?target:jQuery('[name='+this.hash.slice(1)+']');if(target.length){jQuery('html,body').animate({scrollTop:target.offset().top-50},500);return false;}}});var text=jQuery('#block-cart .cart-block--summary__count').text();var qty=text.split(" ",1);jQuery('#cart-qty').text(qty);if(screen.width<=991){jQuery('.box-h4-mobile-click h4').click(function(){jQuery(this).toggleClass('up');jQuery(this).next().toggleClass('auto');});}
const $=jQuery;$(".news-content img").each(function(){$("<p class='text-center cap-style mt-2'>").html($(this).attr("data-caption")).insertAfter($(this));});});(function($){if($('.path-lien-he').length){$('.path-lien-he .form-item-lua-chon-yeu-cau input[name="lua_chon_yeu_cau"]').click(function(e){$('.ac-container').slideToggle();});$.when($('section.ac-container').appendTo('.webform-submission-contact-add-form .form-item-lua-chon-yeu-cau')).done(function(){$('.path-lien-he .form-item-lua-chon-yeu-cau section.ac-container ul li').unbind().click(function(e){var text=$(this).text();$(this).parents('.ac-container').slideUp();$('.path-lien-he .form-item-lua-chon-yeu-cau input').val(text);$('input[name="lua_chon_yeu_cau"]').val(text);});});}})(jQuery);(function($,Drupal){Drupal.behaviors.batteryEcosystemMenu={attach:function(context,settings){$(document).on("click touchend",'.box-car-head a.account, #mobile-nav a.account, .mobile-manager-user a.account',function(e){e.preventDefault();$('.iframe-login-sf').attr('src',drupalSettings['sf_domain']+'/login/iframe');$('.iframe-login-sf').addClass('show');jQuery.event.trigger("ajaxStart");});var title=document.title;var page_title=title.split('|');if($('#page-title-chatbot').length>0){document.getElementById("page-title-chatbot").innerHTML=page_title[0];}
$('.nav-battery-ecosystem-sp').click(function(){var page_title=$('.nav-battery-ecosystem-sp .page-title');if(page_title.hasClass('hide-menu-link')){page_title.removeClass('hide-menu-link');page_title.addClass('show-menu-link');}else{page_title.removeClass('show-menu-link');page_title.addClass('hide-menu-link');}});$(document).click(function(e){jQuery('.cmp-save-btn').on('click touched',function(){jQuery("#wrapper-cc").hide();});var target=$(e.target.parentElement.parentElement);$('#footer-wrapper .menu-footer div.menu-item').each(function(index,value){if(target.attr('id')!==$(this).attr('id')&&$(this).hasClass('show')){$(this).removeClass('show');if(screen.width>769){$('#footer-wrapper .sub-menu').removeClass('d-block');$('#footer-wrapper .sub-menu').removeClass('d-block');}else{$('#footer-wrapper .menu-footer .block-left, #footer-wrapper .menu-footer .block-right').addClass('sp-col');$('#footer-wrapper .menu-footer').css('display','flex');}}});});if(screen.width>769){$('#footer-wrapper .menu-footer div.menu-item').click(function(e){var self=this;$('#footer-wrapper .menu-footer').addClass('show');$(this).toggleClass('show');var target_id=$(this).attr('id');$('#footer-wrapper .sub-menu').addClass('d-block');$('#footer-wrapper .sub-menu div').each(function(index,value){if($(this).hasClass(target_id)){$(this).addClass('d-block');$(this).addClass('show');}else{$(this).removeClass('d-block');$(this).removeClass('show');}});if($('#footer-wrapper .menu-footer.show .menu-item.show').length>0){$('#footer-wrapper .sub-menu').addClass('d-block');}else{$('#footer-wrapper .sub-menu').removeClass('d-block');}
var left=$('#footer-wrapper .menu-footer h3.menu-title').width()+60;$('#footer-wrapper .sub-menu').css('left',left);var parentFooterHeight=$(self).closest('.menu-footer').outerHeight();var subMenuHeight=$('#footer-wrapper .sub-menu').outerHeight();var bottom=parentFooterHeight-subMenuHeight-$(self).position().top;if(bottom<0){bottom=0;}
$('#footer-wrapper .sub-menu').css('bottom',bottom);$('#footer-wrapper .sub-menu').css('left','110px');});}
if(screen.width<=768){$('#footer-wrapper .menu-footer div.menu-item').click(function(e){$('#footer-wrapper .menu-footer').addClass('show');$(this).toggleClass('show');$(e.target.parentElement.parentElement).find('.body').toggleClass('d-none');if($('#footer-wrapper .menu-footer.show .menu-item.show').length>0){$('#footer-wrapper .menu-footer').css('display','block');$('#footer-wrapper .menu-footer .block-left, #footer-wrapper .menu-footer .block-right').removeClass('sp-col');}else{$('#footer-wrapper .menu-footer').css('display','flex');$('#footer-wrapper .menu-footer .block-left, #footer-wrapper .menu-footer .block-right').addClass('sp-col');}});var lastScrollTop=0;window.addEventListener("scroll",function(){var st=window.pageYOffset||document.documentElement.scrollTop;if(st>lastScrollTop){$('#block-side-floating-menu-icon').css('visibility','hidden');$('#block-side-floating-menu-icon').css('opacity','0');$('#block-side-floating-menu-icon').css('transition','0.75s');$('#block-side-floating-menu-icon').css('transform','translateY(80px)');}else{$('#block-side-floating-menu-icon').css('visibility','visible');$('#block-side-floating-menu-icon').css('opacity','1');$('#block-side-floating-menu-icon').css('transition','0.75s');$('#block-side-floating-menu-icon').css('transform','translateY(0)');}
lastScrollTop=st<=0?0:st;},false);}
window.addEventListener('click',function(e){if(!document.getElementById('button-select-region-sp'))
return;if(document.getElementById('button-select-region-sp')?.contains(e.target)){$('.button-select-region-sp').toggleClass('active');$('#menus-global').toggleClass('show');}else{$('.button-select-region-sp').removeClass('active');$('#menus-global').removeClass('show');}});var current_url=window.location.href;if(current_url.trim().split('?').at(-1)==='success=true'){setCookie("change_password_success","yes");$('#change-password-success').toggleClass('show')}
$('#change-password-success .close-form').unbind().click(function(){$('#change-password-success').toggleClass('show');})
$('#register-success .close-form').unbind().click(function(){$('#register-success').toggleClass('show');})}};})(jQuery,Drupal);function setCookie(cname,cvalue){var d=new Date();d.setTime(d.getTime()+30*60*1000);var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+"; "+expires;}
(function($){$(document).ready(function(){var ua=navigator.userAgent,clickEvent=(ua.match(/iPad/i)||ua.match(/iPhone/))?"touchstart":(("ontouchend"in document)?"touchend":"click");if(window.Profile){getReminderList();}
$('.block-megamainmenu.no-hover > a').on('click',function(e){if($(this).parent().hasClass('mega_menu_active')){$(this).parent().removeClass('mega_menu_active');}else{$(this).parent().addClass('mega_menu_active');}});$(document).on(clickEvent,'.notify-service__close',function(){var thisNotify=$(this);thisNotify.parent().addClass('notify-service-popup--hide');setTimeout(function(){thisNotify.parent().addClass('d-none');},300);});var vehicleEntry=$('#block-megamainmenuoto .tab-content .tab-pane a.img, #block-megamainmenuxemay .tab-content .tab-pane a.img')
vehicleEntry.hover(function(){var entry=this;vehicleEntry.each(function(){if(this===entry){$(this).addClass('vehicle-hover');}})},function(){vehicleEntry.each(function(){$(this).removeClass('vehicle-hover');})},);function getReminderList(){var reminderList=$('#ReminderListURL');if(reminderList.length===0)return false;var reminderListURL=reminderList.val();var cloneNotify=$('.notify-service-popup');var csrf_token=$('meta[name="csrf_token"]').attr('content');if(typeof csrf_token==='undefined')csrf_token=$('input[name="csrf_token"]').val();var form='&csrf_token='+csrf_token;$.ajax({url:reminderListURL,method:'GET',data:form,dataType:'json',success:function(data){if(data.reminders&&data.reminders.length>0){$('.notify-service').removeClass('d-none');for(var i=0;i<data.reminders.length;i++){var reminder=data.reminders[i];cloneNotify.clone().attr("id",i).removeClass('d-none').appendTo(".notify-service");var idClone=$('#'+i);var serviceURL=idClone.find('a').attr('href');idClone.find('a').attr('href',serviceURL+'?licensePlate='+reminder.VF_Product__r.License_Plate__c+'&remiderId='+reminder.Id);var dateReminder=new Date(reminder.Next_Estimate_Service_Date__c);idClone.find('.notify-service__body .date .day').text(dateReminder.getDate());idClone.find('.notify-service__body .date .month').text(dateReminder.getMonth()+1);idClone.find('.notify-service__body .date .year').text(dateReminder.getFullYear());}}else{$('.notify-service').addClass('d-none');}},error:function(error){}});}
$(document).on('click','.v3s-footer--about-item > span',function(e){var item=$(this).closest('li');if(item.hasClass('active')){item.removeClass('active');item.closest('ul').removeClass('has-active');}else{$('.v3s-footer--about-item').removeClass('active');item.addClass('active');item.closest('ul').addClass('has-active');}});$(window).on('touchstart mousedown',function(e){var active=$('.v3s-footer--about-item.active');if(active.length&&$(e.target).parents('.v3s-footer--about-item').length===0){active.removeClass('active');active.closest('ul').removeClass('has-active');}});$(document).on(clickEvent,'#block-megamainmenu a',function(e){if($(this).attr('href')!==undefined&&!$(this).attr('href').startsWith('#')&&!$(this).attr('href').startsWith('javascript')&&!(e.shiftKey||e.ctrlKey||e.metaKey)){if($.fn.spinner)$.spinner().start();}});$(document).on(clickEvent,'#block-megamainmenu .mega_menu_header.mega-main-menu a',function(e){var $parent=$(this).parent();if($parent.hasClass('active')){$parent.removeClass('active');}else{$parent.addClass('active').siblings().removeClass('active');}});$(document).on('click',function(e){if($(e.target).parents('.mega_main.active').length==0){$('.mega_main.active').removeClass('active');}
if($(e.target).parents('#headerLanguage').length<1){if($('#megaMenuModal .header-language--show').length){$('#megaMenuModal .header-language--show').closest('.block-megamainmenu').removeClass('active');$('#megaMenuModal .header-language--show').removeClass('header-language--show');}}});$(document).on('click','.mega-submenu .block-megamainmenu',function(e){if($(this).hasClass('mega_menu_active')){$(this).removeClass('mega_menu_active');$('body').css('overflow-y','auto');$('#megaMenuModal').modal('hide');}else{$(this).addClass('mega_menu_active');$('body').css('overflow-y','hidden');$('#megaMenuModal').modal('show');}
if($('#megaMenuModal').hasClass('show')){$('#nav-icon-region').addClass('d-none');$('.header-mobile-menu .mega-main-menu').addClass('change-icon');$('.close-menu').removeClass('d-none');}else{$('.header-mobile-menu .mega-main-menu').removeClass('change-icon');$('#nav-icon-region').removeClass('d-none');$('.close-menu').addClass('d-none');}});$('#megaMenuModal').on('hidden.bs.modal',function(e){$('.mega-submenu.mega_menu_header.mega-main-menu .block-megamainmenu.desktop-hover').removeClass('mega_menu_active');$('html').removeClass('modal-opened');})
$('#megaMenuModal').on('show.bs.modal',function(e){$('html').addClass('modal-opened');})
$(document).on(clickEvent,'#headerLanguage .block-megamainmenu',function(e){if(!($(e.target).parent().hasClass('btn-close')||$(e.target).hasClass('btn-close'))){$(this).find('.mega_menu').addClass('header-language--show');var preventRedirect=$(e.target).closest('a.localeLink').length||$(e.target).hasClass('localeLink');if(preventRedirect){e.preventDefault();return false;}}});$(document).on(clickEvent,'#headerLanguage .btn-close',function(e){$('#headerLanguage .header-language--show').removeClass('header-language--show');$('#headerLanguage').find('.block-megamainmenu.desktop-hover.active').removeClass('active');});$("#mobile-login").on('mouseover',function(){$('.mega-submenu.mega_menu_header.mega-main-menu .block-megamainmenu.desktop-hover').addClass('mega_menu_active');});$("#mobile-login").on('mouseleave',function(){$('.mega-submenu.mega_menu_header.mega-main-menu .block-megamainmenu.desktop-hover').removeClass('mega_menu_active');});function isTouchDevice(){return 'ontouchstart'in document.documentElement||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0;}
if(isTouchDevice()){$('.block-megamainmenu.desktop-hover').addClass('has-touch');}
document.querySelectorAll('#mega-submenu .submenu-expand').forEach(function(item){item.addEventListener('click',function(event){var activeExpand=document.querySelector('#mega-submenu .submenu-expand.active-expand');if(activeExpand){activeExpand.classList.remove('active-expand');}
if(activeExpand!==item){item.classList.add('active-expand');}})});if(sessionStorage.getItem("popup")==undefined||sessionStorage.getItem("popup")==null){}else{if(jQuery('.popup-front').length)
jQuery('.popup-front').addClass('popup-hide');}
if(jQuery('.close-popup').length){jQuery('.close-popup').click(function(e){setTimeout(function(){jQuery('.popup-front').addClass('popup-hide');},150)});}});$(function(){if($('.promo-des').length){$('.promo-des > h3 > a').matchHeight();}
jQuery(document).ajaxComplete(function(event,xhr,settings){if($('.promo-des').length){$('.promo-des > h3 > a').matchHeight();}});$('#block-trangchupopup').on('click','.close-popup',function(e){sessionStorage.setItem("popup","open");jQuery('#block-trangchupopup').fadeOut(300).remove();})
if(sessionStorage.getItem("popup")==undefined||sessionStorage.getItem("popup")==null){if($('.popup-carousel').length){var owl=$('.popup-carousel').owlCarousel({loop:true,margin:0,nav:false,animateOut:'fadeOut',autoplay:true,autoplayTimeout:3000,autoplayHoverPause:true,mouseDrag:true,touchDrag:true,responsive:{0:{items:1}}});owl.on("mousewheel",".owl-stage",function(e){if(e.originalEvent.wheelDelta>0){clearTimeout($.data(this,'timer'));$.data(this,'timer',setTimeout(function(){if(window.homeSwiper){window.homeSwiper.slidePrev();}},250));}else{clearTimeout($.data(this,'timer'));$.data(this,'timer',setTimeout(function(){if(window.homeSwiper){window.homeSwiper.slideNext();}},250));}
e.preventDefault();});}}else{if($('#block-trangchupopup').length){$('#block-trangchupopup').remove();}}});})(jQuery,Drupal);