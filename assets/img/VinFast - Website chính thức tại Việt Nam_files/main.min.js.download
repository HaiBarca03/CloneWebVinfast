/*! For license information please see main.min.js.LICENSE.txt */
!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=27)}([function(e,t,n){function r(e){if(e)return function(e){for(var t in r.prototype)e[t]=r.prototype[t];return e}(e)}e.exports=r,r.prototype.on=r.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},r.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},r.prototype.off=r.prototype.removeListener=r.prototype.removeAllListeners=r.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},r.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},r.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},r.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,n){var r,i=n(48),o=n(20),s=n(50),a=n(51),c=n(52);"undefined"!==typeof ArrayBuffer&&(r=n(53));var u="undefined"!==typeof navigator&&/Android/i.test(navigator.userAgent),l="undefined"!==typeof navigator&&/PhantomJS/i.test(navigator.userAgent),f=u||l;t.protocol=3;var h=t.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},p=i(h),d={type:"error",data:"parser error"},g=n(54);function m(e,t,n){for(var r=new Array(e.length),i=a(e.length,n),o=function(e,n,i){t(n,(function(t,n){r[e]=n,i(t,r)}))},s=0;s<e.length;s++)o(s,e[s],i)}t.encodePacket=function(e,n,r,i){"function"===typeof n&&(i=n,n=!1),"function"===typeof r&&(i=r,r=null);var o=void 0===e.data?void 0:e.data.buffer||e.data;if("undefined"!==typeof ArrayBuffer&&o instanceof ArrayBuffer)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var i=e.data,o=new Uint8Array(i),s=new Uint8Array(1+i.byteLength);s[0]=h[e.type];for(var a=0;a<o.length;a++)s[a+1]=o[a];return r(s.buffer)}(e,n,i);if("undefined"!==typeof g&&o instanceof g)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);if(f)return function(e,n,r){if(!n)return t.encodeBase64Packet(e,r);var i=new FileReader;return i.onload=function(){t.encodePacket({type:e.type,data:i.result},n,!0,r)},i.readAsArrayBuffer(e.data)}(e,n,r);var i=new Uint8Array(1);i[0]=h[e.type];var o=new g([i.buffer,e.data]);return r(o)}(e,n,i);if(o&&o.base64)return function(e,n){var r="b"+t.packets[e.type]+e.data.data;return n(r)}(e,i);var s=h[e.type];return void 0!==e.data&&(s+=r?c.encode(String(e.data),{strict:!1}):String(e.data)),i(""+s)},t.encodeBase64Packet=function(e,n){var r,i="b"+t.packets[e.type];if("undefined"!==typeof g&&e.data instanceof g){var o=new FileReader;return o.onload=function(){var e=o.result.split(",")[1];n(i+e)},o.readAsDataURL(e.data)}try{r=String.fromCharCode.apply(null,new Uint8Array(e.data))}catch(t){for(var s=new Uint8Array(e.data),a=new Array(s.length),c=0;c<s.length;c++)a[c]=s[c];r=String.fromCharCode.apply(null,a)}return i+=btoa(r),n(i)},t.decodePacket=function(e,n,r){if(void 0===e)return d;if("string"===typeof e){if("b"===e.charAt(0))return t.decodeBase64Packet(e.substr(1),n);if(r&&!1===(e=function(e){try{e=c.decode(e,{strict:!1})}catch(e){return!1}return e}(e)))return d;var i=e.charAt(0);return Number(i)==i&&p[i]?e.length>1?{type:p[i],data:e.substring(1)}:{type:p[i]}:d}i=new Uint8Array(e)[0];var o=s(e,1);return g&&"blob"===n&&(o=new g([o])),{type:p[i],data:o}},t.decodeBase64Packet=function(e,t){var n=p[e.charAt(0)];if(!r)return{type:n,data:{base64:!0,data:e.substr(1)}};var i=r.decode(e.substr(1));return"blob"===t&&g&&(i=new g([i])),{type:n,data:i}},t.encodePayload=function(e,n,r){"function"===typeof n&&(r=n,n=null);var i=o(e);if(n&&i)return g&&!f?t.encodePayloadAsBlob(e,r):t.encodePayloadAsArrayBuffer(e,r);if(!e.length)return r("0:");m(e,(function(e,r){t.encodePacket(e,!!i&&n,!1,(function(e){r(null,function(e){return e.length+":"+e}(e))}))}),(function(e,t){return r(t.join(""))}))},t.decodePayload=function(e,n,r){if("string"!==typeof e)return t.decodePayloadAsBinary(e,n,r);var i;if("function"===typeof n&&(r=n,n=null),""===e)return r(d,0,1);for(var o,s,a="",c=0,u=e.length;c<u;c++){var l=e.charAt(c);if(":"===l){if(""===a||a!=(o=Number(a)))return r(d,0,1);if(a!=(s=e.substr(c+1,o)).length)return r(d,0,1);if(s.length){if(i=t.decodePacket(s,n,!1),d.type===i.type&&d.data===i.data)return r(d,0,1);if(!1===r(i,c+o,u))return}c+=o,a=""}else a+=l}return""!==a?r(d,0,1):void 0},t.encodePayloadAsArrayBuffer=function(e,n){if(!e.length)return n(new ArrayBuffer(0));m(e,(function(e,n){t.encodePacket(e,!0,!0,(function(e){return n(null,e)}))}),(function(e,t){var r=t.reduce((function(e,t){var n;return e+(n="string"===typeof t?t.length:t.byteLength).toString().length+n+2}),0),i=new Uint8Array(r),o=0;return t.forEach((function(e){var t="string"===typeof e,n=e;if(t){for(var r=new Uint8Array(e.length),s=0;s<e.length;s++)r[s]=e.charCodeAt(s);n=r.buffer}i[o++]=t?0:1;var a=n.byteLength.toString();for(s=0;s<a.length;s++)i[o++]=parseInt(a[s]);i[o++]=255;for(r=new Uint8Array(n),s=0;s<r.length;s++)i[o++]=r[s]})),n(i.buffer)}))},t.encodePayloadAsBlob=function(e,n){m(e,(function(e,n){t.encodePacket(e,!0,!0,(function(e){var t=new Uint8Array(1);if(t[0]=1,"string"===typeof e){for(var r=new Uint8Array(e.length),i=0;i<e.length;i++)r[i]=e.charCodeAt(i);e=r.buffer,t[0]=0}var o=(e instanceof ArrayBuffer?e.byteLength:e.size).toString(),s=new Uint8Array(o.length+1);for(i=0;i<o.length;i++)s[i]=parseInt(o[i]);if(s[o.length]=255,g){var a=new g([t.buffer,s.buffer,e]);n(null,a)}}))}),(function(e,t){return n(new g(t))}))},t.decodePayloadAsBinary=function(e,n,r){"function"===typeof n&&(r=n,n=null);for(var i=e,o=[];i.byteLength>0;){for(var a=new Uint8Array(i),c=0===a[0],u="",l=1;255!==a[l];l++){if(u.length>310)return r(d,0,1);u+=a[l]}i=s(i,2+u.length),u=parseInt(u);var f=s(i,0,u);if(c)try{f=String.fromCharCode.apply(null,new Uint8Array(f))}catch(e){var h=new Uint8Array(f);f="";for(l=0;l<h.length;l++)f+=String.fromCharCode(h[l])}o.push(f),i=s(i,u)}var p=o.length;o.forEach((function(e,i){r(t.decodePacket(e,n,!0),i,p)}))}},function(e,t,n){(function(r){function i(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!==typeof r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(36)).log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))})),e.splice(o,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=i,t.useColors=function(){if("undefined"!==typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(i())}).call(this,n(7))},function(e,t){t.encode=function(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t},t.decode=function(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}},function(e,t){e.exports=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},function(e,t,n){(function(r){function i(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!==typeof r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(55)).log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))})),e.splice(o,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=i,t.useColors=function(){if("undefined"!==typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(i())}).call(this,n(7))},function(e,t){var n=function(){var e,t,n,r,i,o=[],s=o.concat,a=o.filter,c=o.slice,u=window.document,l={},f={},h={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},p=/^\s*<(\w+|!)[^>]*>/,d=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,g=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,m=/^(?:body|html)$/i,v=/([A-Z])/g,y=["val","css","html","text","data","width","height","offset"],b=u.createElement("table"),_=u.createElement("tr"),w={tr:u.createElement("tbody"),tbody:b,thead:b,tfoot:b,td:_,th:_,"*":u.createElement("div")},C=/complete|loaded|interactive/,k=/^[\w-]*$/,x={},S=x.toString,E={},A=u.createElement("div"),B={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},T=Array.isArray||function(e){return e instanceof Array};function F(e){return null==e?String(e):x[S.call(e)]||"object"}function P(e){return"function"==F(e)}function M(e){return null!=e&&e==e.window}function j(e){return null!=e&&e.nodeType==e.DOCUMENT_NODE}function L(e){return"object"==F(e)}function R(e){return L(e)&&!M(e)&&Object.getPrototypeOf(e)==Object.prototype}function I(e){var n=!!e&&"length"in e&&e.length,r=t.type(e);return"function"!=r&&!M(e)&&("array"==r||0===n||"number"==typeof n&&n>0&&n-1 in e)}function U(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function N(e){return e in f?f[e]:f[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function O(e,t){return"number"!=typeof t||h[U(e)]?t:t+"px"}function D(e){return"children"in e?c.call(e.children):t.map(e.childNodes,(function(e){if(1==e.nodeType)return e}))}function q(e,t){var n,r=e?e.length:0;for(n=0;n<r;n++)this[n]=e[n];this.length=r,this.selector=t||""}function z(t,n,r){for(e in n)r&&(R(n[e])||T(n[e]))?(R(n[e])&&!R(t[e])&&(t[e]={}),T(n[e])&&!T(t[e])&&(t[e]=[]),z(t[e],n[e],r)):void 0!==n[e]&&(t[e]=n[e])}function H(e,n){return null==n?t(e):t(e).filter(n)}function Y(e,t,n,r){return P(t)?t.call(e,n,r):t}function W(e,t,n){null==n?e.removeAttribute(t):e.setAttribute(t,n)}function V(e,t){var n=e.className||"",r=n&&void 0!==n.baseVal;if(void 0===t)return r?n.baseVal:n;r?n.baseVal=t:e.className=t}function X(e){try{return e?"true"==e||"false"!=e&&("null"==e?null:+e+""==e?+e:/^[\[\{]/.test(e)?t.parseJSON(e):e):e}catch(t){return e}}function $(e,t){t(e);for(var n=0,r=e.childNodes.length;n<r;n++)$(e.childNodes[n],t)}return E.matches=function(e,t){if(!t||!e||1!==e.nodeType)return!1;var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,o=!i;return o&&(i=A).appendChild(e),r=~E.qsa(i,t).indexOf(e),o&&A.removeChild(e),r},r=function(e){return e.replace(/-+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))},i=function(e){return a.call(e,(function(t,n){return e.indexOf(t)==n}))},E.fragment=function(e,n,r){var i,o,s;return d.test(e)&&(i=t(u.createElement(RegExp.$1))),i||(e.replace&&(e=e.replace(g,"<$1></$2>")),void 0===n&&(n=p.test(e)&&RegExp.$1),n in w||(n="*"),(s=w[n]).innerHTML=""+e,i=t.each(c.call(s.childNodes),(function(){s.removeChild(this)}))),R(r)&&(o=t(i),t.each(r,(function(e,t){y.indexOf(e)>-1?o[e](t):o.attr(e,t)}))),i},E.Z=function(e,t){return new q(e,t)},E.isZ=function(e){return e instanceof E.Z},E.init=function(e,n){var r,i;if(!e)return E.Z();if("string"==typeof e)if("<"==(e=e.trim())[0]&&p.test(e))r=E.fragment(e,RegExp.$1,n),e=null;else{if(void 0!==n)return t(n).find(e);r=E.qsa(u,e)}else{if(P(e))return t(u).ready(e);if(E.isZ(e))return e;if(T(e))i=e,r=a.call(i,(function(e){return null!=e}));else if(L(e))r=[e],e=null;else if(p.test(e))r=E.fragment(e.trim(),RegExp.$1,n),e=null;else{if(void 0!==n)return t(n).find(e);r=E.qsa(u,e)}}return E.Z(r,e)},(t=function(e,t){return E.init(e,t)}).extend=function(e){var t,n=c.call(arguments,1);return"boolean"==typeof e&&(t=e,e=n.shift()),n.forEach((function(n){z(e,n,t)})),e},E.qsa=function(e,t){var n,r="#"==t[0],i=!r&&"."==t[0],o=r||i?t.slice(1):t,s=k.test(o);return e.getElementById&&s&&r?(n=e.getElementById(o))?[n]:[]:1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType?[]:c.call(s&&!r&&e.getElementsByClassName?i?e.getElementsByClassName(o):e.getElementsByTagName(t):e.querySelectorAll(t))},t.contains=u.documentElement.contains?function(e,t){return e!==t&&e.contains(t)}:function(e,t){for(;t&&(t=t.parentNode);)if(t===e)return!0;return!1},t.type=F,t.isFunction=P,t.isWindow=M,t.isArray=T,t.isPlainObject=R,t.isEmptyObject=function(e){var t;for(t in e)return!1;return!0},t.isNumeric=function(e){var t=Number(e),n=typeof e;return null!=e&&"boolean"!=n&&("string"!=n||e.length)&&!isNaN(t)&&isFinite(t)||!1},t.inArray=function(e,t,n){return o.indexOf.call(t,e,n)},t.camelCase=r,t.trim=function(e){return null==e?"":String.prototype.trim.call(e)},t.uuid=0,t.support={},t.expr={},t.noop=function(){},t.map=function(e,n){var r,i,o,s,a=[];if(I(e))for(i=0;i<e.length;i++)null!=(r=n(e[i],i))&&a.push(r);else for(o in e)null!=(r=n(e[o],o))&&a.push(r);return(s=a).length>0?t.fn.concat.apply([],s):s},t.each=function(e,t){var n,r;if(I(e)){for(n=0;n<e.length;n++)if(!1===t.call(e[n],n,e[n]))return e}else for(r in e)if(!1===t.call(e[r],r,e[r]))return e;return e},t.grep=function(e,t){return a.call(e,t)},window.JSON&&(t.parseJSON=JSON.parse),t.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(e,t){x["[object "+t+"]"]=t.toLowerCase()})),t.fn={constructor:E.Z,length:0,forEach:o.forEach,reduce:o.reduce,push:o.push,sort:o.sort,splice:o.splice,indexOf:o.indexOf,concat:function(){var e,t,n=[];for(e=0;e<arguments.length;e++)t=arguments[e],n[e]=E.isZ(t)?t.toArray():t;return s.apply(E.isZ(this)?this.toArray():this,n)},map:function(e){return t(t.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return t(c.apply(this,arguments))},ready:function(e){return C.test(u.readyState)&&u.body?e(t):u.addEventListener("DOMContentLoaded",(function(){e(t)}),!1),this},get:function(e){return void 0===e?c.call(this):this[e>=0?e:e+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(e){return o.every.call(this,(function(t,n){return!1!==e.call(t,n,t)})),this},filter:function(e){return P(e)?this.not(this.not(e)):t(a.call(this,(function(t){return E.matches(t,e)})))},add:function(e,n){return t(i(this.concat(t(e,n))))},is:function(e){return this.length>0&&E.matches(this[0],e)},not:function(e){var n=[];if(P(e)&&void 0!==e.call)this.each((function(t){e.call(this,t)||n.push(this)}));else{var r="string"==typeof e?this.filter(e):I(e)&&P(e.item)?c.call(e):t(e);this.forEach((function(e){r.indexOf(e)<0&&n.push(e)}))}return t(n)},has:function(e){return this.filter((function(){return L(e)?t.contains(this,e):t(this).find(e).size()}))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!L(e)?e:t(e)},last:function(){var e=this[this.length-1];return e&&!L(e)?e:t(e)},find:function(e){var n=this;return e?"object"==typeof e?t(e).filter((function(){var e=this;return o.some.call(n,(function(n){return t.contains(n,e)}))})):1==this.length?t(E.qsa(this[0],e)):this.map((function(){return E.qsa(this,e)})):t()},closest:function(e,n){var r=[],i="object"==typeof e&&t(e);return this.each((function(t,o){for(;o&&!(i?i.indexOf(o)>=0:E.matches(o,e));)o=o!==n&&!j(o)&&o.parentNode;o&&r.indexOf(o)<0&&r.push(o)})),t(r)},parents:function(e){for(var n=[],r=this;r.length>0;)r=t.map(r,(function(e){if((e=e.parentNode)&&!j(e)&&n.indexOf(e)<0)return n.push(e),e}));return H(n,e)},parent:function(e){return H(i(this.pluck("parentNode")),e)},children:function(e){return H(this.map((function(){return D(this)})),e)},contents:function(){return this.map((function(){return this.contentDocument||c.call(this.childNodes)}))},siblings:function(e){return H(this.map((function(e,t){return a.call(D(t.parentNode),(function(e){return e!==t}))})),e)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(e){return t.map(this,(function(t){return t[e]}))},show:function(){return this.each((function(){var e,t,n;"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=(e=this.nodeName,l[e]||(t=u.createElement(e),u.body.appendChild(t),n=getComputedStyle(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),"none"==n&&(n="block"),l[e]=n),l[e]))}))},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){var n=P(e);if(this[0]&&!n)var r=t(e).get(0),i=r.parentNode||this.length>1;return this.each((function(o){t(this).wrapAll(n?e.call(this,o):i?r.cloneNode(!0):r)}))},wrapAll:function(e){if(this[0]){var n;for(t(this[0]).before(e=t(e));(n=e.children()).length;)e=n.first();t(e).append(this)}return this},wrapInner:function(e){var n=P(e);return this.each((function(r){var i=t(this),o=i.contents(),s=n?e.call(this,r):e;o.length?o.wrapAll(s):i.append(s)}))},unwrap:function(){return this.parent().each((function(){t(this).replaceWith(t(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(e){return this.each((function(){var n=t(this);(void 0===e?"none"==n.css("display"):e)?n.show():n.hide()}))},prev:function(e){return t(this.pluck("previousElementSibling")).filter(e||"*")},next:function(e){return t(this.pluck("nextElementSibling")).filter(e||"*")},html:function(e){return 0 in arguments?this.each((function(n){var r=this.innerHTML;t(this).empty().append(Y(this,e,n,r))})):0 in this?this[0].innerHTML:null},text:function(e){return 0 in arguments?this.each((function(t){var n=Y(this,e,t,this.textContent);this.textContent=null==n?"":""+n})):0 in this?this.pluck("textContent").join(""):null},attr:function(t,n){var r;return"string"!=typeof t||1 in arguments?this.each((function(r){if(1===this.nodeType)if(L(t))for(e in t)W(this,e,t[e]);else W(this,t,Y(this,n,r,this.getAttribute(t)))})):0 in this&&1==this[0].nodeType&&null!=(r=this[0].getAttribute(t))?r:void 0},removeAttr:function(e){return this.each((function(){1===this.nodeType&&e.split(" ").forEach((function(e){W(this,e)}),this)}))},prop:function(e,t){return e=B[e]||e,1 in arguments?this.each((function(n){this[e]=Y(this,t,n,this[e])})):this[0]&&this[0][e]},removeProp:function(e){return e=B[e]||e,this.each((function(){delete this[e]}))},data:function(e,t){var n="data-"+e.replace(v,"-$1").toLowerCase(),r=1 in arguments?this.attr(n,t):this.attr(n);return null!==r?X(r):void 0},val:function(e){return 0 in arguments?(null==e&&(e=""),this.each((function(t){this.value=Y(this,e,t,this.value)}))):this[0]&&(this[0].multiple?t(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each((function(n){var r=t(this),i=Y(this,e,n,r.offset()),o=r.offsetParent().offset(),s={top:i.top-o.top,left:i.left-o.left};"static"==r.css("position")&&(s.position="relative"),r.css(s)}));if(!this.length)return null;if(u.documentElement!==this[0]&&!t.contains(u.documentElement,this[0]))return{top:0,left:0};var n=this[0].getBoundingClientRect();return{left:n.left+window.pageXOffset,top:n.top+window.pageYOffset,width:Math.round(n.width),height:Math.round(n.height)}},css:function(n,i){if(arguments.length<2){var o=this[0];if("string"==typeof n){if(!o)return;return o.style[r(n)]||getComputedStyle(o,"").getPropertyValue(n)}if(T(n)){if(!o)return;var s={},a=getComputedStyle(o,"");return t.each(n,(function(e,t){s[t]=o.style[r(t)]||a.getPropertyValue(t)})),s}}var c="";if("string"==F(n))i||0===i?c=U(n)+":"+O(n,i):this.each((function(){this.style.removeProperty(U(n))}));else for(e in n)n[e]||0===n[e]?c+=U(e)+":"+O(e,n[e])+";":this.each((function(){this.style.removeProperty(U(e))}));return this.each((function(){this.style.cssText+=";"+c}))},index:function(e){return e?this.indexOf(t(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return!!e&&o.some.call(this,(function(e){return this.test(V(e))}),N(e))},addClass:function(e){return e?this.each((function(r){if("className"in this){n=[];var i=V(this);Y(this,e,r,i).split(/\s+/g).forEach((function(e){t(this).hasClass(e)||n.push(e)}),this),n.length&&V(this,i+(i?" ":"")+n.join(" "))}})):this},removeClass:function(e){return this.each((function(t){if("className"in this){if(void 0===e)return V(this,"");n=V(this),Y(this,e,t,n).split(/\s+/g).forEach((function(e){n=n.replace(N(e)," ")})),V(this,n.trim())}}))},toggleClass:function(e,n){return e?this.each((function(r){var i=t(this);Y(this,e,r,V(this)).split(/\s+/g).forEach((function(e){(void 0===n?!i.hasClass(e):n)?i.addClass(e):i.removeClass(e)}))})):this},scrollTop:function(e){if(this.length){var t="scrollTop"in this[0];return void 0===e?t?this[0].scrollTop:this[0].pageYOffset:this.each(t?function(){this.scrollTop=e}:function(){this.scrollTo(this.scrollX,e)})}},scrollLeft:function(e){if(this.length){var t="scrollLeft"in this[0];return void 0===e?t?this[0].scrollLeft:this[0].pageXOffset:this.each(t?function(){this.scrollLeft=e}:function(){this.scrollTo(e,this.scrollY)})}},position:function(){if(this.length){var e=this[0],n=this.offsetParent(),r=this.offset(),i=m.test(n[0].nodeName)?{top:0,left:0}:n.offset();return r.top-=parseFloat(t(e).css("margin-top"))||0,r.left-=parseFloat(t(e).css("margin-left"))||0,i.top+=parseFloat(t(n[0]).css("border-top-width"))||0,i.left+=parseFloat(t(n[0]).css("border-left-width"))||0,{top:r.top-i.top,left:r.left-i.left}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent||u.body;e&&!m.test(e.nodeName)&&"static"==t(e).css("position");)e=e.offsetParent;return e}))}},t.fn.detach=t.fn.remove,["width","height"].forEach((function(e){var n=e.replace(/./,(function(e){return e[0].toUpperCase()}));t.fn[e]=function(r){var i,o=this[0];return void 0===r?M(o)?o["inner"+n]:j(o)?o.documentElement["scroll"+n]:(i=this.offset())&&i[e]:this.each((function(n){(o=t(this)).css(e,Y(this,r,n,o[e]()))}))}})),["after","prepend","before","append"].forEach((function(e,n){var r=n%2;t.fn[e]=function(){var e,i,o=t.map(arguments,(function(n){var r=[];return"array"==(e=F(n))?(n.forEach((function(e){return void 0!==e.nodeType?r.push(e):t.zepto.isZ(e)?r=r.concat(e.get()):void(r=r.concat(E.fragment(e)))})),r):"object"==e||null==n?n:E.fragment(n)})),s=this.length>1;return o.length<1?this:this.each((function(e,a){i=r?a:a.parentNode,a=0==n?a.nextSibling:1==n?a.firstChild:2==n?a:null;var c=t.contains(u.documentElement,i);o.forEach((function(e){if(s)e=e.cloneNode(!0);else if(!i)return t(e).remove();i.insertBefore(e,a),c&&$(e,(function(e){if(null!=e.nodeName&&"SCRIPT"===e.nodeName.toUpperCase()&&(!e.type||"text/javascript"===e.type)&&!e.src){var t=e.ownerDocument?e.ownerDocument.defaultView:window;t.eval.call(t,e.innerHTML)}}))}))}))},t.fn[r?e+"To":"insert"+(n?"Before":"After")]=function(n){return t(n)[e](this),this}})),E.Z.prototype=q.prototype=t.fn,E.uniq=i,E.deserializeValue=X,t.zepto=E,t}();e.exports=n},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"===typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,u=[],l=!1,f=-1;function h(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&p())}function p(){if(!l){var e=a(h);l=!0;for(var t=u.length;t;){for(c=u,u=[];++f<t;)c&&c[f].run();f=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new d(e,t)),1!==u.length||l||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){var n=1e3,r=6e4,i=60*r,o=24*i;function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var a,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return s*o;case"hours":case"hour":case"hrs":case"hr":case"h":return s*i;case"minutes":case"minute":case"mins":case"min":case"m":return s*r;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?s(a=e,o,"day")||s(a,i,"hour")||s(a,r,"minute")||s(a,n,"second")||a+" ms":function(e){if(e>=o)return Math.round(e/o)+"d";if(e>=i)return Math.round(e/i)+"h";if(e>=r)return Math.round(e/r)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){var r=n(37)("socket.io-parser"),i=n(0),o=n(39),s=n(15),a=n(16);function c(){}t.protocol=4,t.types=["CONNECT","DISCONNECT","EVENT","ACK","ERROR","BINARY_EVENT","BINARY_ACK"],t.CONNECT=0,t.DISCONNECT=1,t.EVENT=2,t.ACK=3,t.ERROR=4,t.BINARY_EVENT=5,t.BINARY_ACK=6,t.Encoder=c,t.Decoder=f;var u=t.ERROR+'"encode error"';function l(e){var n=""+e.type;if(t.BINARY_EVENT!==e.type&&t.BINARY_ACK!==e.type||(n+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(n+=e.nsp+","),null!=e.id&&(n+=e.id),null!=e.data){var i=function(e){try{return JSON.stringify(e)}catch(e){return!1}}(e.data);if(!1===i)return u;n+=i}return r("encoded %j as %s",e,n),n}function f(){this.reconstructor=null}function h(e){this.reconPack=e,this.buffers=[]}function p(e){return{type:t.ERROR,data:"parser error: "+e}}c.prototype.encode=function(e,n){(r("encoding packet %j",e),t.BINARY_EVENT===e.type||t.BINARY_ACK===e.type)?function(e,t){o.removeBlobs(e,(function(e){var n=o.deconstructPacket(e),r=l(n.packet),i=n.buffers;i.unshift(r),t(i)}))}(e,n):n([l(e)])},i(f.prototype),f.prototype.add=function(e){var n;if("string"===typeof e)n=function(e){var n=0,i={type:Number(e.charAt(0))};if(null==t.types[i.type])return p("unknown packet type "+i.type);if(t.BINARY_EVENT===i.type||t.BINARY_ACK===i.type){for(var o=n+1;"-"!==e.charAt(++n)&&n!=e.length;);var a=e.substring(o,n);if(a!=Number(a)||"-"!==e.charAt(n))throw new Error("Illegal attachments");i.attachments=Number(a)}if("/"===e.charAt(n+1)){for(o=n+1;++n;){if(","===(u=e.charAt(n)))break;if(n===e.length)break}i.nsp=e.substring(o,n)}else i.nsp="/";var c=e.charAt(n+1);if(""!==c&&Number(c)==c){for(o=n+1;++n;){var u;if(null==(u=e.charAt(n))||Number(u)!=u){--n;break}if(n===e.length)break}i.id=Number(e.substring(o,n+1))}if(e.charAt(++n)){var l=function(e){try{return JSON.parse(e)}catch(e){return!1}}(e.substr(n));if(!(!1!==l&&(i.type===t.ERROR||s(l))))return p("invalid payload");i.data=l}return r("decoded %s as %j",e,i),i}(e),t.BINARY_EVENT===n.type||t.BINARY_ACK===n.type?(this.reconstructor=new h(n),0===this.reconstructor.reconPack.attachments&&this.emit("decoded",n)):this.emit("decoded",n);else{if(!a(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(n=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,this.emit("decoded",n))}},f.prototype.destroy=function(){this.reconstructor&&this.reconstructor.finishedReconstruction()},h.prototype.takeBinaryData=function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=o.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null},h.prototype.finishedReconstruction=function(){this.reconPack=null,this.buffers=[]}},function(e,t,n){"use strict";(function(e){var r=n(41),i=n(42),o=n(43);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,n){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(e,t,n);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return f(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=h(e,t);return e}(e,t,n,r):"string"===typeof t?function(e,t,n){"string"===typeof n&&""!==n||(n="utf8");if(!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(t,n),i=(e=a(e,r)).write(t,n);i!==r&&(e=e.slice(0,i));return e}(e,t,n):function(e,t){if(c.isBuffer(t)){var n=0|p(t.length);return 0===(e=a(e,n)).length||t.copy(e,0,0,n),e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(r=t.length)!==r?a(e,0):h(e,t);if("Buffer"===t.type&&o(t.data))return h(e,t.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function l(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function f(e,t){if(l(t),e=a(e,t<0?0:0|p(t)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function h(e,t){var n=t.length<0?0:0|p(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function p(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function d(e,t){if(c.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return D(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(e).length;default:if(r)return D(e).length;t=(""+t).toLowerCase(),r=!0}}function g(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,n);case"utf8":case"utf-8":return E(this,t,n);case"ascii":return A(this,t,n);case"latin1":case"binary":return B(this,t,n);case"base64":return S(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function v(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:y(e,t,n,r,i);if("number"===typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):y(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function y(e,t,n,r,i){var o,s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){var l=-1;for(o=n;o<a;o++)if(u(e,o)===u(t,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*s}else-1!==l&&(o-=o-l),l=-1}else for(n+c>a&&(n=a-c),o=n;o>=0;o--){for(var f=!0,h=0;h<c;h++)if(u(e,o+h)!==u(t,h)){f=!1;break}if(f)return o}return-1}function b(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;s<r;++s){var a=parseInt(t.substr(2*s,2),16);if(isNaN(a))return s;e[n+s]=a}return s}function _(e,t,n,r){return z(D(t,e.length-n),e,n,r)}function w(e,t,n,r){return z(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function C(e,t,n,r){return w(e,t,n,r)}function k(e,t,n,r){return z(q(t),e,n,r)}function x(e,t,n,r){return z(function(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function S(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function E(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,s,a,c,u=e[i],l=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f<=n)switch(f){case 1:u<128&&(l=u);break;case 2:128===(192&(o=e[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=e[i+1],s=e[i+2],128===(192&o)&&128===(192&s)&&(c=(15&u)<<12|(63&o)<<6|63&s)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=e[i+1],s=e[i+2],a=e[i+3],128===(192&o)&&128===(192&s)&&128===(192&a)&&(c=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&c<1114112&&(l=c)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(e){var t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=4096));return n}(r)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,n){return u(null,e,t,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,n){return function(e,t,n,r){return l(t),t<=0?a(e,t):void 0!==n?"string"===typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}(null,e,t,n)},c.allocUnsafe=function(e){return f(null,e)},c.allocUnsafeSlow=function(e){return f(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=c.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var s=e[n];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(r,i),i+=s.length}return r},c.byteLength=d,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?E(this,0,e):g.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,n,r,i){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0),a=Math.min(o,s),u=this.slice(r,i),l=e.slice(t,n),f=0;f<a;++f)if(u[f]!==l[f]){o=u[f],s=l[f];break}return o<s?-1:s<o?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return v(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return v(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,e,t,n);case"utf8":case"utf-8":return _(this,e,t,n);case"ascii":return w(this,e,t,n);case"latin1":case"binary":return C(this,e,t,n);case"base64":return k(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return x(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function A(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function B(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function T(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=O(e[o]);return i}function F(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function P(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,r,i,o){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function j(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function L(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function R(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function I(e,t,n,r,o){return o||R(e,0,n,4),i.write(e,t,n,r,23,4),n+4}function U(e,t,n,r,o){return o||R(e,0,n,8),i.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){var n,r=this.length;if((e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(e,t)).__proto__=c.prototype;else{var i=t-e;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+e]}return n},c.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},c.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},c.prototype.readUInt8=function(e,t){return t||P(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||P(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||P(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||P(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||P(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||P(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},c.prototype.readInt8=function(e,t){return t||P(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||P(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){t||P(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return t||P(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||P(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||P(e,4,this.length),i.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||P(e,4,this.length),i.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||P(e,8,this.length),i.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||P(e,8,this.length),i.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t|=0,n|=0,r)||M(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):L(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var o=0,s=1,a=0;for(this[t]=255&e;++o<n&&(s*=256);)e<0&&0===a&&0!==this[t+o-1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var o=n-1,s=1,a=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)e<0&&0===a&&0!==this[t+o+1]&&(a=1),this[t+o]=(e/s>>0)-a&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):j(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):j(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):L(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):L(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,n){return I(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return I(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return U(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return U(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},c.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"===typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=c.isBuffer(e)?e:D(new c(e,r).toString()),a=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%a]}return this};var N=/[^+\/0-9A-Za-z-_]/g;function O(e){return e<16?"0"+e.toString(16):e.toString(16)}function D(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],s=0;s<r;++s){if((n=e.charCodeAt(s))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function q(e){return r.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(N,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function z(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}}).call(this,n(40))},function(e,t,n){var r=n(46),i=n(12);e.exports=function(e){var t=e.xdomain,n=e.xscheme,o=e.enablesXDR;try{if("undefined"!==typeof XMLHttpRequest&&(!t||r))return new XMLHttpRequest}catch(e){}try{if("undefined"!==typeof XDomainRequest&&!n&&o)return new XDomainRequest}catch(e){}if(!t)try{return new(i[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(e){}}},function(e,t){e.exports="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")()},function(e,t,n){var r=n(1),i=n(0);function o(e){this.path=e.path,this.hostname=e.hostname,this.port=e.port,this.secure=e.secure,this.query=e.query,this.timestampParam=e.timestampParam,this.timestampRequests=e.timestampRequests,this.readyState="",this.agent=e.agent||!1,this.socket=e.socket,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.forceNode=e.forceNode,this.isReactNative=e.isReactNative,this.extraHeaders=e.extraHeaders,this.localAddress=e.localAddress}e.exports=o,i(o.prototype),o.prototype.onError=function(e,t){var n=new Error(e);return n.type="TransportError",n.description=t,this.emit("error",n),this},o.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},o.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},o.prototype.send=function(e){if("open"!==this.readyState)throw new Error("Transport not open");this.write(e)},o.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},o.prototype.onData=function(e){var t=r.decodePacket(e,this.socket.binaryType);this.onPacket(t)},o.prototype.onPacket=function(e){this.emit("packet",e)},o.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},function(e,t){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,r=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(e){var t=e,i=e.indexOf("["),o=e.indexOf("]");-1!=i&&-1!=o&&(e=e.substring(0,i)+e.substring(i,o).replace(/:/g,";")+e.substring(o,e.length));for(var s,a,c=n.exec(e||""),u={},l=14;l--;)u[r[l]]=c[l]||"";return-1!=i&&-1!=o&&(u.source=t,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=function(e,t){var n=t.replace(/\/{2,9}/g,"/").split("/");"/"!=t.substr(0,1)&&0!==t.length||n.splice(0,1);"/"==t.substr(t.length-1,1)&&n.splice(n.length-1,1);return n}(0,u.path),u.queryKey=(s=u.query,a={},s.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,n){t&&(a[t]=n)})),a),u}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){(function(t){e.exports=function(e){return n&&t.isBuffer(e)||r&&(e instanceof ArrayBuffer||function(e){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))};var n="function"===typeof t&&"function"===typeof t.isBuffer,r="function"===typeof ArrayBuffer}).call(this,n(10).Buffer)},function(e,t,n){var r=n(44),i=n(23),o=n(0),s=n(9),a=n(24),c=n(25),u=n(2)("socket.io-client:manager"),l=n(22),f=n(60),h=Object.prototype.hasOwnProperty;function p(e,t){if(!(this instanceof p))return new p(e,t);e&&"object"===typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.nsps={},this.subs=[],this.opts=t,this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(t.randomizationFactor||.5),this.backoff=new f({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this.readyState="closed",this.uri=e,this.connecting=[],this.lastPing=null,this.encoding=!1,this.packetBuffer=[];var n=t.parser||s;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this.autoConnect=!1!==t.autoConnect,this.autoConnect&&this.open()}e.exports=p,p.prototype.emitAll=function(){for(var e in this.emit.apply(this,arguments),this.nsps)h.call(this.nsps,e)&&this.nsps[e].emit.apply(this.nsps[e],arguments)},p.prototype.updateSocketIds=function(){for(var e in this.nsps)h.call(this.nsps,e)&&(this.nsps[e].id=this.generateId(e))},p.prototype.generateId=function(e){return("/"===e?"":e+"#")+this.engine.id},o(p.prototype),p.prototype.reconnection=function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection},p.prototype.reconnectionAttempts=function(e){return arguments.length?(this._reconnectionAttempts=e,this):this._reconnectionAttempts},p.prototype.reconnectionDelay=function(e){return arguments.length?(this._reconnectionDelay=e,this.backoff&&this.backoff.setMin(e),this):this._reconnectionDelay},p.prototype.randomizationFactor=function(e){return arguments.length?(this._randomizationFactor=e,this.backoff&&this.backoff.setJitter(e),this):this._randomizationFactor},p.prototype.reconnectionDelayMax=function(e){return arguments.length?(this._reconnectionDelayMax=e,this.backoff&&this.backoff.setMax(e),this):this._reconnectionDelayMax},p.prototype.timeout=function(e){return arguments.length?(this._timeout=e,this):this._timeout},p.prototype.maybeReconnectOnOpen=function(){!this.reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()},p.prototype.open=p.prototype.connect=function(e,t){if(u("readyState %s",this.readyState),~this.readyState.indexOf("open"))return this;u("opening %s",this.uri),this.engine=r(this.uri,this.opts);var n=this.engine,i=this;this.readyState="opening",this.skipReconnect=!1;var o=a(n,"open",(function(){i.onopen(),e&&e()})),s=a(n,"error",(function(t){if(u("connect_error"),i.cleanup(),i.readyState="closed",i.emitAll("connect_error",t),e){var n=new Error("Connection error");n.data=t,e(n)}else i.maybeReconnectOnOpen()}));if(!1!==this._timeout){var c=this._timeout;u("connect attempt will timeout after %d",c),0===c&&o.destroy();var l=setTimeout((function(){u("connect attempt timed out after %d",c),o.destroy(),n.close(),n.emit("error","timeout"),i.emitAll("connect_timeout",c)}),c);this.subs.push({destroy:function(){clearTimeout(l)}})}return this.subs.push(o),this.subs.push(s),this},p.prototype.onopen=function(){u("open"),this.cleanup(),this.readyState="open",this.emit("open");var e=this.engine;this.subs.push(a(e,"data",c(this,"ondata"))),this.subs.push(a(e,"ping",c(this,"onping"))),this.subs.push(a(e,"pong",c(this,"onpong"))),this.subs.push(a(e,"error",c(this,"onerror"))),this.subs.push(a(e,"close",c(this,"onclose"))),this.subs.push(a(this.decoder,"decoded",c(this,"ondecoded")))},p.prototype.onping=function(){this.lastPing=new Date,this.emitAll("ping")},p.prototype.onpong=function(){this.emitAll("pong",new Date-this.lastPing)},p.prototype.ondata=function(e){this.decoder.add(e)},p.prototype.ondecoded=function(e){this.emit("packet",e)},p.prototype.onerror=function(e){u("error",e),this.emitAll("error",e)},p.prototype.socket=function(e,t){var n=this.nsps[e];if(!n){n=new i(this,e,t),this.nsps[e]=n;var r=this;n.on("connecting",o),n.on("connect",(function(){n.id=r.generateId(e)})),this.autoConnect&&o()}function o(){~l(r.connecting,n)||r.connecting.push(n)}return n},p.prototype.destroy=function(e){var t=l(this.connecting,e);~t&&this.connecting.splice(t,1),this.connecting.length||this.close()},p.prototype.packet=function(e){u("writing packet %j",e);var t=this;e.query&&0===e.type&&(e.nsp+="?"+e.query),t.encoding?t.packetBuffer.push(e):(t.encoding=!0,this.encoder.encode(e,(function(n){for(var r=0;r<n.length;r++)t.engine.write(n[r],e.options);t.encoding=!1,t.processPacketQueue()})))},p.prototype.processPacketQueue=function(){if(this.packetBuffer.length>0&&!this.encoding){var e=this.packetBuffer.shift();this.packet(e)}},p.prototype.cleanup=function(){u("cleanup");for(var e=this.subs.length,t=0;t<e;t++){this.subs.shift().destroy()}this.packetBuffer=[],this.encoding=!1,this.lastPing=null,this.decoder.destroy()},p.prototype.close=p.prototype.disconnect=function(){u("disconnect"),this.skipReconnect=!0,this.reconnecting=!1,"opening"===this.readyState&&this.cleanup(),this.backoff.reset(),this.readyState="closed",this.engine&&this.engine.close()},p.prototype.onclose=function(e){u("onclose"),this.cleanup(),this.backoff.reset(),this.readyState="closed",this.emit("close",e),this._reconnection&&!this.skipReconnect&&this.reconnect()},p.prototype.reconnect=function(){if(this.reconnecting||this.skipReconnect)return this;var e=this;if(this.backoff.attempts>=this._reconnectionAttempts)u("reconnect failed"),this.backoff.reset(),this.emitAll("reconnect_failed"),this.reconnecting=!1;else{var t=this.backoff.duration();u("will wait %dms before reconnect attempt",t),this.reconnecting=!0;var n=setTimeout((function(){e.skipReconnect||(u("attempting reconnect"),e.emitAll("reconnect_attempt",e.backoff.attempts),e.emitAll("reconnecting",e.backoff.attempts),e.skipReconnect||e.open((function(t){t?(u("reconnect attempt error"),e.reconnecting=!1,e.reconnect(),e.emitAll("reconnect_error",t.data)):(u("reconnect success"),e.onreconnect())})))}),t);this.subs.push({destroy:function(){clearTimeout(n)}})}},p.prototype.onreconnect=function(){var e=this.backoff.attempts;this.reconnecting=!1,this.backoff.reset(),this.updateSocketIds(),this.emitAll("reconnect",e)}},function(e,t,n){var r=n(11),i=n(47),o=n(56),s=n(57);t.polling=function(e){var t=!1,n=!1,s=!1!==e.jsonp;if("undefined"!==typeof location){var a="https:"===location.protocol,c=location.port;c||(c=a?443:80),t=e.hostname!==location.hostname||c!==e.port,n=e.secure!==a}if(e.xdomain=t,e.xscheme=n,"open"in new r(e)&&!e.forceJSONP)return new i(e);if(!s)throw new Error("JSONP disabled");return new o(e)},t.websocket=s},function(e,t,n){var r=n(13),i=n(3),o=n(1),s=n(4),a=n(21),c=n(5)("engine.io-client:polling");e.exports=l;var u=null!=new(n(11))({xdomain:!1}).responseType;function l(e){var t=e&&e.forceBase64;u&&!t||(this.supportsBinary=!1),r.call(this,e)}s(l,r),l.prototype.name="polling",l.prototype.doOpen=function(){this.poll()},l.prototype.pause=function(e){var t=this;function n(){c("paused"),t.readyState="paused",e()}if(this.readyState="pausing",this.polling||!this.writable){var r=0;this.polling&&(c("we are currently polling - waiting to pause"),r++,this.once("pollComplete",(function(){c("pre-pause polling complete"),--r||n()}))),this.writable||(c("we are currently writing - waiting to pause"),r++,this.once("drain",(function(){c("pre-pause writing complete"),--r||n()})))}else n()},l.prototype.poll=function(){c("polling"),this.polling=!0,this.doPoll(),this.emit("poll")},l.prototype.onData=function(e){var t=this;c("polling got data %s",e);o.decodePayload(e,this.socket.binaryType,(function(e,n,r){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose(),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():c('ignoring poll - transport state "%s"',this.readyState))},l.prototype.doClose=function(){var e=this;function t(){c("writing close packet"),e.write([{type:"close"}])}"open"===this.readyState?(c("transport open - closing"),t()):(c("transport not open - deferring close"),this.once("open",t))},l.prototype.write=function(e){var t=this;this.writable=!1;var n=function(){t.writable=!0,t.emit("drain")};o.encodePayload(e,this.supportsBinary,(function(e){t.doWrite(e,n)}))},l.prototype.uri=function(){var e=this.query||{},t=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=a()),this.supportsBinary||e.sid||(e.b64=1),e=i.encode(e),this.port&&("https"===t&&443!==Number(this.port)||"http"===t&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e}},function(e,t,n){(function(t){var r=n(49),i=Object.prototype.toString,o="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===i.call(Blob),s="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===i.call(File);e.exports=function e(n){if(!n||"object"!==typeof n)return!1;if(r(n)){for(var i=0,a=n.length;i<a;i++)if(e(n[i]))return!0;return!1}if("function"===typeof t&&t.isBuffer&&t.isBuffer(n)||"function"===typeof ArrayBuffer&&n instanceof ArrayBuffer||o&&n instanceof Blob||s&&n instanceof File)return!0;if(n.toJSON&&"function"===typeof n.toJSON&&1===arguments.length)return e(n.toJSON(),!0);for(var c in n)if(Object.prototype.hasOwnProperty.call(n,c)&&e(n[c]))return!0;return!1}}).call(this,n(10).Buffer)},function(e,t,n){"use strict";var r,i="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),o={},s=0,a=0;function c(e){var t="";do{t=i[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function u(){var e=c(+new Date);return e!==r?(s=0,r=e):e+"."+c(s++)}for(;a<64;a++)o[i[a]]=a;u.encode=c,u.decode=function(e){var t=0;for(a=0;a<e.length;a++)t=64*t+o[e.charAt(a)];return t},e.exports=u},function(e,t){var n=[].indexOf;e.exports=function(e,t){if(n)return e.indexOf(t);for(var r=0;r<e.length;++r)if(e[r]===t)return r;return-1}},function(e,t,n){var r=n(9),i=n(0),o=n(59),s=n(24),a=n(25),c=n(2)("socket.io-client:socket"),u=n(3),l=n(20);e.exports=p;var f={connect:1,connect_error:1,connect_timeout:1,connecting:1,disconnect:1,error:1,reconnect:1,reconnect_attempt:1,reconnect_failed:1,reconnect_error:1,reconnecting:1,ping:1,pong:1},h=i.prototype.emit;function p(e,t,n){this.io=e,this.nsp=t,this.json=this,this.ids=0,this.acks={},this.receiveBuffer=[],this.sendBuffer=[],this.connected=!1,this.disconnected=!0,this.flags={},n&&n.query&&(this.query=n.query),this.io.autoConnect&&this.open()}i(p.prototype),p.prototype.subEvents=function(){if(!this.subs){var e=this.io;this.subs=[s(e,"open",a(this,"onopen")),s(e,"packet",a(this,"onpacket")),s(e,"close",a(this,"onclose"))]}},p.prototype.open=p.prototype.connect=function(){return this.connected||(this.subEvents(),this.io.reconnecting||this.io.open(),"open"===this.io.readyState&&this.onopen(),this.emit("connecting")),this},p.prototype.send=function(){var e=o(arguments);return e.unshift("message"),this.emit.apply(this,e),this},p.prototype.emit=function(e){if(f.hasOwnProperty(e))return h.apply(this,arguments),this;var t=o(arguments),n={type:(void 0!==this.flags.binary?this.flags.binary:l(t))?r.BINARY_EVENT:r.EVENT,data:t,options:{}};return n.options.compress=!this.flags||!1!==this.flags.compress,"function"===typeof t[t.length-1]&&(c("emitting packet with ack id %d",this.ids),this.acks[this.ids]=t.pop(),n.id=this.ids++),this.connected?this.packet(n):this.sendBuffer.push(n),this.flags={},this},p.prototype.packet=function(e){e.nsp=this.nsp,this.io.packet(e)},p.prototype.onopen=function(){if(c("transport is open - connecting"),"/"!==this.nsp)if(this.query){var e="object"===typeof this.query?u.encode(this.query):this.query;c("sending connect packet with query %s",e),this.packet({type:r.CONNECT,query:e})}else this.packet({type:r.CONNECT})},p.prototype.onclose=function(e){c("close (%s)",e),this.connected=!1,this.disconnected=!0,delete this.id,this.emit("disconnect",e)},p.prototype.onpacket=function(e){var t=e.nsp===this.nsp,n=e.type===r.ERROR&&"/"===e.nsp;if(t||n)switch(e.type){case r.CONNECT:this.onconnect();break;case r.EVENT:case r.BINARY_EVENT:this.onevent(e);break;case r.ACK:case r.BINARY_ACK:this.onack(e);break;case r.DISCONNECT:this.ondisconnect();break;case r.ERROR:this.emit("error",e.data)}},p.prototype.onevent=function(e){var t=e.data||[];c("emitting event %j",t),null!=e.id&&(c("attaching ack callback to event"),t.push(this.ack(e.id))),this.connected?h.apply(this,t):this.receiveBuffer.push(t)},p.prototype.ack=function(e){var t=this,n=!1;return function(){if(!n){n=!0;var i=o(arguments);c("sending ack %j",i),t.packet({type:l(i)?r.BINARY_ACK:r.ACK,id:e,data:i})}}},p.prototype.onack=function(e){var t=this.acks[e.id];"function"===typeof t?(c("calling ack %s with %j",e.id,e.data),t.apply(this,e.data),delete this.acks[e.id]):c("bad ack %s",e.id)},p.prototype.onconnect=function(){this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emit("connect")},p.prototype.emitBuffered=function(){var e;for(e=0;e<this.receiveBuffer.length;e++)h.apply(this,this.receiveBuffer[e]);for(this.receiveBuffer=[],e=0;e<this.sendBuffer.length;e++)this.packet(this.sendBuffer[e]);this.sendBuffer=[]},p.prototype.ondisconnect=function(){c("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")},p.prototype.destroy=function(){if(this.subs){for(var e=0;e<this.subs.length;e++)this.subs[e].destroy();this.subs=null}this.io.destroy(this)},p.prototype.close=p.prototype.disconnect=function(){return this.connected&&(c("performing disconnect (%s)",this.nsp),this.packet({type:r.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this},p.prototype.compress=function(e){return this.flags.compress=e,this},p.prototype.binary=function(e){return this.flags.binary=e,this}},function(e,t){e.exports=function(e,t,n){return e.on(t,n),{destroy:function(){e.removeListener(t,n)}}}},function(e,t){var n=[].slice;e.exports=function(e,t){if("string"==typeof t&&(t=e[t]),"function"!=typeof t)throw new Error("bind() requires a function");var r=n.call(arguments,2);return function(){return t.apply(e,r.concat(n.call(arguments)))}}},function(e,t,n){var r=n(6);n(62),n(63),n(64),n(65),e.exports=r},function(e,t,n){e.exports=n(28)},function(e,t,n){"use strict";n(29);var r,i=n(32),o=(r=i)&&r.__esModule?r:{default:r};!function(e){e.AIPChatBox={init:function(e){(new o.default).init(e)},setBotLanguage:function(e){return localStorage.setItem("aip-chatbot-language",e),"Success"},setBotDefaultLanguage:function(e){return localStorage.getItem("aip-chatbot-language")||localStorage.setItem("aip-chatbot-language",e),"Success"},getBotLanguage:function(){return localStorage.getItem("aip-chatbot-language")},setUser:function(e){return e.username&&e.userid?(localStorage.setItem("aip-chatbot-user",e),"Set user success!"):"Set user failed!"},getUser:function(){return localStorage.getItem("aip-chatbot-user")},removeUser:function(){return localStorage.removeItem("aip-chatbot-language"),"User removed!"},toggleOpen:function(){o.default.getInstance().controlChatBox()}}}(window)},function(e,t,n){var r=n(30),i=n(31);"string"===typeof(i=i.__esModule?i.default:i)&&(i=[[e.i,i,""]]);var o={insert:"head",singleton:!1};r(i,o);e.exports=i.locals||{}},function(e,t,n){"use strict";var r,i=function(){return"undefined"===typeof r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var e={};return function(t){if("undefined"===typeof e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),s=[];function a(e){for(var t=-1,n=0;n<s.length;n++)if(s[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},r=[],i=0;i<e.length;i++){var o=e[i],c=t.base?o[0]+t.base:o[0],u=n[c]||0,l="".concat(c," ").concat(u);n[c]=u+1;var f=a(l),h={css:o[1],media:o[2],sourceMap:o[3]};-1!==f?(s[f].references++,s[f].updater(h)):s.push({identifier:l,updater:m(h,t),references:1}),r.push(l)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if("undefined"===typeof r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"===typeof e.insert)e.insert(t);else{var s=o(e.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(t)}return t}var l,f=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function h(e,t,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=f(t,i);else{var o=document.createTextNode(i),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(o,s[t]):e.appendChild(o)}}function p(e,t,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?e.setAttribute("media",i):e.removeAttribute("media"),o&&"undefined"!==typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var d=null,g=0;function m(e,t){var n,r,i;if(t.singleton){var o=g++;n=d||(d=u(t)),r=h.bind(null,n,o,!1),i=h.bind(null,n,o,!0)}else n=u(t),r=p.bind(null,n,t),i=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"===typeof t.singleton||(t.singleton=i());var n=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var i=a(n[r]);s[i].references--}for(var o=c(e,t),u=0;u<n.length;u++){var l=a(n[u]);0===s[l].references&&(s[l].updater(),s.splice(l,1))}n=o}}}},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=c(n(33)),s=c(n(61)),a=c(n(26));function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.agent={name:"",id:"",cid:"",token:""},this.baseUrl="",this.ws_host="",this.socketService=void 0,this.widgetConfig=void 0,this.welcomeMessage="",this.isSocketOpened=!1,this.clientID="",this.messages=[],this.tmpMessage="",this.user_name="",this.user_email="",this.user_phone="",this.checkValid=!1,this.isSendInfoData=!1,this.requireFields=[],this.useServerConfig=!1,this.useWelcomeScreen=!1,this.isNewUser=!1,this.persistentMenuConfig=void 0,this.suggestionData=[],this.hideHelloMsg=!1,this.clientToken="",this.enableBot=!0,this.language="vi",this.enableMultiLanguage=!1,this.allLanguages={en:"English",vi:"Ti\u1ebfng Vi\u1ec7t",fr:"Fran\xe7ais",de:"Deutsch",kr:"\ud55c\uad6d\uc5b4",zh:"\u4e2d\u6587"},this.supportedLanguage=[],this.multiLanguageSetting=void 0,this.loggedUser=void 0,this.currentScreen=void 0,this.isGuestUser=!1,this.errMsgs={vi:{required:"Tr\u01b0\u1eddng n\xe0y kh\xf4ng th\u1ec3 \u0111\u1ec3 tr\u1ed1ng",invalid:"Sai \u0111\u1ecbnh d\u1ea1ng"},en:{required:"This field can not be empty",invalid:"Invalid format"},kr:{required:"\uc774 \ud544\ub4dc\ub294 \ube44\uc6cc\ub458 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",invalid:"\uc798\ubabb\ub41c \ud615\uc2dd"},zh:{required:"\u6b64\u5b57\u6bb5\u4e0d\u80fd\u4e3a\u7a7a",invalid:"\u683c\u5f0f\u65e0\u6548"}},this.isLoadedEmoji=!1}return i(e,[{key:"init",value:function(e){if(!(0,a.default)("#aip-chat-box").length){var t=e.agent,n=e.baseUrl,r=e.ws_host,i=e.widgetConfig,o=this;this.agent=t,this.baseUrl=n,this.ws_host=r,i.persitent_menu&&(this.persistentMenuConfig=i.persitent_menu),this.importFont(),this.importModal(),(0,a.default)(window).on("load",(function(){void 0!==i.use_server_config?(o.useServerConfig=!0,a.default.ajax({url:o.baseUrl+"/api/v1/chatbot_gateway/agents/"+o.agent.id+"/channel/"+o.agent.cid+"/setting",type:"GET",headers:{token:o.agent.token},success:function(e){if(0===e.error_code){o.enableBot=!0,o.language=o.getBotLanguage();var t=e.data.multi_language_setting;if(o.supportedLanguage=e.data.languages,o.supportedLanguage&&!o.supportedLanguage.includes(o.language)&&(o.language=o.supportedLanguage[0],o.setBotLanguage(o.language)),t){o.supportedLanguage.length>1&&(o.enableMultiLanguage=!0);var n=t[o.language]?t[o.language]:t.vi;o.widgetConfig=Object.assign(o.agent,n),o.multiLanguageSetting=t}else o.widgetConfig=Object.assign(o.agent,e.data);o.useServerConfig=!0,o.agent.vid=e.data.version_id;var r=o.widgetConfig.minimized_setting,i=o.widgetConfig.maximized_setting,s=o.widgetConfig.welcome_screen_setting,a=o.widgetConfig.profile_screen_setting;o.useWelcomeScreen=!!s&&s.is_enabled,o.widgetConfig.fb_icon=r.icon_setting.fb_icon,o.widgetConfig.avatar=o.baseUrl+i.bot_avatar,o.widgetConfig.get_started_action_type=a.get_started_action_type,o.widgetConfig.get_started_action_payload=a.get_started_action_value?a.get_started_action_value.payload:"",o.widgetConfig.fields=a.fields,o.widgetConfig.introduce_msg=a.title,i.persistent_menu_setting&&(o.persistentMenuConfig=i.persistent_menu_setting)}else o.enableBot=!1},error:function(){o.enableBot=!1},complete:function(){o.enableBot&&a.default.get(o.baseUrl+"/livechat-vinfast/assets/template/index.html",(function(e){(0,a.default)(document.body).append(e),o.renderMinimized(),o.dbName="aip-livechat-"+o.agent.id,o.dbNameGuest="aip-livechat-"+o.agent.id+"-guest",o.renderChatBox()}))}})):(o.widgetConfig=Object.assign(o.agent,i),o.enableBot&&a.default.get(o.baseUrl+"/livechat-vinfast/assets/template/index.html",(function(e){(0,a.default)(document.body).append(e),(0,a.default)("#fab_icon").attr("src",o.widgetConfig.fb_icon),o.dbName="aip-livechat-"+o.agent.id,o.dbNameGuest="aip-livechat-"+o.agent.id+"-guest",o.renderChatBox()})))}))}}},{key:"importFont",value:function(){var e=(0,a.default)("head"),t=e.find("link"),n=document.createElement("link");n.id="import_link_main_css",n.rel="stylesheet",n.href=this.baseUrl+"/livechat-vinfast/main.css";var r=document.createElement("link");r.id="import_link_font_icon",r.rel="stylesheet",r.href="https://fonts.googleapis.com/css?family=Noto+Sans:300,400,600,700&display=swap&subset=vietnamese";var i=document.createElement("link");i.id="import_link_font_icon",i.rel="stylesheet",i.href="https://fonts.googleapis.com/css?family=Mulish:300,400,600,700&display=swap&subset=vietnamese",t.length?(e[0].insertBefore(n,t[0]),e[0].insertBefore(r,t[0]),e[0].insertBefore(i,t[0])):(e.append(n),e.append(r),e.append(i))}},{key:"importModal",value:function(){var e=document.createElement("script");e.src=this.baseUrl+"/livechat-vinfast/iframe-lightbox.js",document.getElementsByTagName("body")[0].appendChild(e);var t=(0,a.default)("head"),n=t.find("link"),r=document.createElement("link");r.id="import_iframe_lightbox_css",r.rel="stylesheet",r.href=this.baseUrl+"/livechat-vinfast/iframe-lightbox.css";var i=document.createElement("link");i.id="import_emoji_css",i.rel="stylesheet",i.href=this.baseUrl+"/livechat-vinfast/emoji.css",n.length?(t[0].insertBefore(r,n[0]),t[0].insertBefore(i,n[0])):(t.append(r),t.append(i))}},{key:"importEmoji",value:function(){var e=this,t=document.createElement("script");t.src=this.baseUrl+"/livechat-vinfast/emoji.min.js",t.onload=function(){e.isLoadedEmoji=!0,e.chatLog.initEmojiConvertor()},document.getElementsByTagName("body")[0].appendChild(t)}},{key:"renderChatBox",value:function(){var e=this;a.default.get(this.baseUrl+"/livechat-vinfast/assets/template/chatbox.html",(function(t){(0,a.default)("#aip-chat-box").prepend(t),e.applyStyle(),e.renderPoweredBy(),e.loggedUser=e.getLoggedUser(),e.renderHeader(),e.isGuestUser=localStorage.getItem("isGuestUser"),e.useWelcomeScreen&&""===e.getUserInfo("username")&&!e.isGuestUser?(e.renderWelcomeScreen(),e.initWelcomeScreen()):e.loggedUser&&e.loggedUser.id?(e.agent.user_name=e.loggedUser.username,e.agent.user_email=e.loggedUser.useremail,e.agent.user_phone=e.loggedUser.userphone,e.socketService=new o.default(e.agent,e.ws_host),e.socketService.initSocket(e.loggedUser.userid,"",e),e.chatLog=new s.default(e.agent,e.widgetConfig,e),e.renderChatScreen(),e.initChatScreen()):""!==e.getUserInfo("username")||e.useWelcomeScreen?(e.agent.user_name=e.getUserInfo("username"),e.agent.user_email=e.getUserInfo("useremail"),e.agent.user_phone=e.getUserInfo("userphone"),e.socketService=new o.default(e.agent,e.ws_host),e.socketService.initSocket(e.getClientID(),"",e),e.chatLog=new s.default(e.agent,e.widgetConfig,e),e.renderChatScreen(),e.initChatScreen()):(e.isNewUser=!0,e.renderProfileScreen(),e.initProfileScreen()),e.widgetConfig.open_automatically&&(0,a.default)("#prime").click()}))}},{key:"renderMinimized",value:function(){var e=this,t=e.widgetConfig.minimized_setting;if((0,a.default)("#prime").empty(),"image"===t.icon_setting.type?(0,a.default)("#prime").append('<img id="fab_icon" src="'+e.widgetConfig.fb_icon+'" class="fab_icon" alt="avatar" />'):(0,a.default)("#prime").append('<i class="mdi '+t.icon_setting.icon_name+'" aria-hidden="true" id="fab_icon"></i>'),""!=t.text.trim()){var n=t.text.split("\\n"),r=(0,a.default)('<div class="hello_message__content is-float">'),i=(0,a.default)('<div class="arrow_down"></div>'),o=(0,a.default)('<div id="cw_close_button" class="cw_close_button"><svg width="10" height="10" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path\n                    d="M11.7863 0.333008L6.99967 5.11967L2.21301 0.333008L0.333008 2.21301L5.11967 6.99967L0.333008 11.7863L2.21301 13.6663L6.99967 8.87967L11.7863 13.6663L13.6663 11.7863L8.87967 6.99967L13.6663 2.21301L11.7863 0.333008Z"\n                    fill="#99A2B4" />\n            </svg></i></div>');n.forEach((function(e,t){r.append("<span>"+e.trim()+"</span>"),t<n.length-1&&r.append("<br/>")})),(0,a.default)("#cw_hello_message").empty(),(0,a.default)("#cw_hello_message").append(i),(0,a.default)("#cw_hello_message").append(o),(0,a.default)("#cw_hello_message").append(r),(0,a.default)("#cw_hello_message").addClass("is-visible"),(0,a.default)("#cw_close_button").click((function(){e.hideHelloMsg=!0,(0,a.default)("#cw_hello_message").removeClass("is-visible")}))}}},{key:"applyStyle",value:function(){var e=void 0,t=(0,a.default)(":root")[0];if(this.useServerConfig){e=this.widgetConfig.maximized_setting;var n=this.widgetConfig.minimized_setting,r=this.widgetConfig.welcome_screen_setting,i=this.widgetConfig.profile_screen_setting,o=this.widgetConfig.survey_screen_setting;this.widgetConfig.avatar=e.bot_avatar;var s=e.bot_name,c=e.size_chatbox.on_desktop,u=e.size_chatbox.on_mobile,l=this.widgetConfig.guest_mode_setting;e.welcome_msg,t.style.setProperty("--cw-icon-bottom-padding",n.padding_bottom+"px"),t.style.setProperty("--cw-icon-right-padding",n.padding_right+"px"),t.style.setProperty("--cw-bottom-padding",c.padding_bottom+"px"),t.style.setProperty("--cw-right-padding",c.padding_right+"px"),t.style.setProperty("--cw-width",c.width+"px"),t.style.setProperty("--cw-height",c.height+"px"),t.style.setProperty("--cw-mobile-width",u.width+"vw"),t.style.setProperty("--cw-mobile-height",u.height+"%"),t.style.setProperty("--cw-mobile-right-padding",u.padding_right+"%"),t.style.setProperty("--cw-mobile-bottom-padding",u.padding_bottom+"%"),t.style.setProperty("--cw-avatar-border-radius",e.avatar_border_radius+"%"),t.style.setProperty("--cw-input-background-color",""+e.input_background_color),t.style.setProperty("--cw-input-text-color",""+e.input_text_color),t.style.setProperty("--cw-input-width",e.input_width+"%"),t.style.setProperty("--cw-input-border-radius",e.input_border_radius+"px"),t.style.setProperty("--cw-welcome-screen-slogan-color",""+r.slogan_color),t.style.setProperty("--cw-welcome-screen-message-color",""+r.message_color),t.style.setProperty("--cw-welcome-screen-button-background-color",""+r.button_background_color),t.style.setProperty("--cw-welcome-screen-button-text-color",""+r.button_text_color),t.style.setProperty("--cw-profile-screen-button-background-color",""+i.button_background_color),t.style.setProperty("--cw-profile-screen-button-text-color",""+i.button_text_color),t.style.setProperty("--cw-survey-screen-button-background-color",""+o.button_background_color),t.style.setProperty("--cw-survey-screen-button-text-color",""+o.button_text_color),t.style.setProperty("--cw-bubble-background",""+n.icon_setting.bubble_background),t.style.setProperty("--cw-bubble-text-color",""+n.icon_setting.font_color),l&&(t.style.setProperty("--cw-welcome-screen-guest-button-background-color",""+l.button_background_color),t.style.setProperty("--cw-welcome-screen-guest-button-text-color",""+l.button_text_color)),(0,a.default)("#header_avatar").attr("src",e.bot_avatar),this.agent.name=s}else e=this.widgetConfig,(0,a.default)("#header_avatar").attr("src",e.avatar);(0,a.default)("#chat_agent").text(this.agent.name),t.style.setProperty("--cw-header-color",e.header_color),t.style.setProperty("--cw-header-text",e.header_text),t.style.setProperty("--cw-background-color",e.background_color),t.style.setProperty("--cw-user-bubble-color",e.user_bubble_color),t.style.setProperty("--cw-user-text-color",e.user_text_color),t.style.setProperty("--cw-bot-bubble-color",e.bot_bubble_color),t.style.setProperty("--cw-bot-text-color",e.bot_text_color)}},{key:"renderHeader",value:function(){this.renderSwitchLanguage(),this.renderHeaderMenu()}},{key:"renderPoweredBy",value:function(){if(this.useServerConfig){var e=this.widgetConfig.maximized_setting.power_by_text;e&&(0,a.default)("#poweredByVinbase").text(e)}}},{key:"renderWelcomeScreen",value:function(){var e=this.widgetConfig.welcome_screen_setting,t=this.widgetConfig.guest_mode_setting;(0,a.default)("#welcome_screen_image").attr("src",e.logo_img),(0,a.default)("#welcome_screen_slogan").empty(),(0,a.default)("#welcome_screen_message").empty(),e.slogan.split("\n").forEach((function(e){(0,a.default)("#welcome_screen_slogan").append('<p style="margin: 2px 0">'+e+"</p>")})),""===this.getUserInfo("username")||!this.loggedUser||this.loggedUser&&!this.loggedUser.username?e.welcome_msg.split("\n").forEach((function(e){(0,a.default)("#welcome_screen_message").append('<p style="margin: 2px 0">'+e+"</p>")})):(e.welcome_back_msg=e.welcome_back_msg.replace("{{username}}",this.getUserInfo("username")),e.welcome_back_msg.split("\n").forEach((function(e){(0,a.default)("#welcome_screen_message").append('<p style="margin: 2px 0">'+e+"</p>")}))),(""!==this.getUserInfo("username")||this.loggedUser&&(!this.loggedUser||this.loggedUser.id))&&e.continue_button_text?(0,a.default)("#welcome_screen_button").text(e.continue_button_text.replace("{{username}}",this.getUserInfo("username"))):(0,a.default)("#welcome_screen_button").text(e.button_text),this.widgetConfig.enable_guest_mode?((0,a.default)("#welcome_screen_guest_button").addClass("is-visible"),(0,a.default)("#welcome_screen_guest_button").text(t.button_text)):(0,a.default)("#welcome_screen_guest_button").removeClass("is-visible"),(0,a.default)("#chat_minimize").show(),(0,a.default)("#chat_action_header").hide()}},{key:"initWelcomeScreen",value:function(){var e=this;this.currentScreen="welcome";var t=this;(0,a.default)("#welcome_screen").addClass("is-visible"),(0,a.default)("#welcome_screen_button").off(),(0,a.default)("#welcome_screen_button").click((function(){(0,a.default)("#welcome_screen").removeClass("is-visible"),e.isGuestUser=!1,""!==t.getUserInfo("username")||t.loggedUser&&(!t.loggedUser||t.loggedUser.id)?(t.agent.user_name=t.getUserInfo("username"),t.agent.user_email=t.getUserInfo("useremail"),t.agent.user_phone=t.getUserInfo("userphone"),t.socketService=new o.default(t.agent,t.ws_host),t.socketService.initSocket(t.getClientID(),"",t),t.chatLog=new s.default(t.agent,t.widgetConfig,t),(0,a.default)("#chat_log").empty(),t.renderChatScreen(),t.initChatScreen(),t.chatLog.scrollToLatestMessage(0)):(t.isNewUser=!0,t.renderProfileScreen(),t.initProfileScreen())})),(0,a.default)("#prime").off(),(0,a.default)("#prime").click((function(){t.toggleChatBox(!1)})),(0,a.default)("#chat_minimize").off(),(0,a.default)("#chat_minimize").click((function(){t.toggleChatBox(!1)})),this.widgetConfig.enable_guest_mode&&((0,a.default)("#welcome_screen_guest_button").off(),(0,a.default)("#welcome_screen_guest_button").click((function(){(0,a.default)("#welcome_screen").removeClass("is-visible"),t.isNewUser=!0,t.isGuestUser=!0;var e="GUEST"+Math.round((new Date).getTime()/1e3).toString();localStorage.setItem("isGuestUser",!0),localStorage.setItem("guestname",e),t.agent.user_name=e,t.socketService=new o.default(t.agent,t.ws_host),t.socketService.initSocket(t.getClientID(),"",t),t.chatLog=new s.default(t.agent,t.widgetConfig,t),t.renderChatScreen(),t.initChatScreen(),(0,a.default)("#chat_log").empty()})))}},{key:"renderProfileScreen",value:function(){(0,a.default)("#profile_screen").addClass("is-visible"),(0,a.default)("#profile_screen").empty();var e=this;e.widgetConfig.introduce_msg?(0,a.default)("#profile_screen").append('<p id="get_user_info_title" class="cw_form_title">'+e.widgetConfig.introduce_msg+"</p>"):(0,a.default)("#profile_screen").append('<p id="get_user_info_title" class="cw_form_title">Xin ch\xe0o, \u0111\xe2y l\xe0 h\u1ec7 th\u1ed1ng h\u1ed7 tr\u1ee3 kh\xe1ch h\xe0ng 24/7 c\u1ee7a '+this.agent.name+'. Anh/ch\u1ecb vui l\xf2ng cho bi\u1ebft th\xf4ng tin?"</p>'),e.widgetConfig.fields&&e.widgetConfig.fields.length||(e.widgetConfig.fields=[{value:"name",label:"H\u1ecd t\xean",placeholder:"H\u1ecd t\xean",required:!0,enable:!0}]),e.widgetConfig.fields.forEach((function(t){t.enable&&(t.required&&e.requireFields.push(t.value),t.label&&(0,a.default)("#profile_screen").append('\n        <p class="cw_form_label">'+t.label+(t.required?"<span style='color:red'> (*)</span>":"")+"</p>"),(0,a.default)("#profile_screen").append('\n          <input \n            id="vinbase_input_'+t.value+'" \n            name="vinbase_input_'+t.value+'" \n            placeholder="'+t.placeholder+'" \n            class="user_info_input chat_field chat_message" autocomplete="off"\n          >\n          </input>\n        <span\n          style="width:calc(100% - 30px)"\n          id="vinbase_input_'+t.value+'_error_msg" class="error_msg"\n        >\n        </span>\n      '))}));var t="B\u1eaft \u0111\u1ea7u";if(e.useServerConfig&&(t=e.widgetConfig.profile_screen_setting.button_text),(0,a.default)("#profile_screen").append('\n        <div id="profile_screen_button_container" class="profile_screen_button_container">\n        <div\n          id="vinbase_submit_user_info"\n          name="submit_user_info_aip"\n          class="profile_screen_button disabled-button"\n        >'+t+"\n        </div>\n        </div>\n    "),e.useServerConfig&&e.widgetConfig.enable_guest_mode){var n=e.widgetConfig.guest_mode_setting.back_button_text;(0,a.default)("#profile_screen_button_container").append('\n        <div\n          id="cb_go_back_button"\n          class="profile_screen_button cb_go_back_button"\n        >'+n+"\n        </div>\n      ")}}},{key:"initProfileScreen",value:function(){var e=this,t=this;this.currentScreen="profile",(0,a.default)("#prime").off(),(0,a.default)("#prime").click((function(){t.toggleChatBox(!1)})),(0,a.default)("#chat_minimize").off(),(0,a.default)("#chat_minimize").click((function(){t.toggleChatBox(!1)})),(0,a.default)("#vinbase_input_name").on("keyup",(function(n){"Enter"===n.key&&e.checkValidAll()&&(0,a.default)("#vinbase_submit_user_info").click();var r=n.target.value.escape();t.user_name=r.trim(),t.validInput("name"),t.enableProfileButton()})),(0,a.default)("#vinbase_input_email").on("keyup",(function(n){"Enter"===n.key&&e.checkValidAll()&&(0,a.default)("#vinbase_submit_user_info").click();var r=n.target.value.escape();t.user_email=r.trim(),t.validInput("email"),t.enableProfileButton()})),(0,a.default)("#vinbase_input_phone").on("keyup",(function(n){"Enter"===n.key&&e.checkValidAll()&&(0,a.default)("#vinbase_submit_user_info").click();var r=n.target.value;t.user_phone=r.trim(),t.validInput("phone"),t.enableProfileButton()})),(0,a.default)("#vinbase_submit_user_info").off(),(0,a.default)("#vinbase_submit_user_info").click((function(){t.checkValidAll()&&(t.setUserInfo("username",t.user_name),t.setUserInfo("useremail",t.user_email),t.setUserInfo("userphone",t.user_phone),t.agent.user_name=t.user_name,t.agent.user_email=t.user_email,t.agent.user_phone=t.user_phone,t.useServerConfig?t.welcomeMessage=t.widgetConfig.maximized_setting.welcome_msg.replace("{{username}}",t.agent.user_name):t.welcomeMessage=t.widgetConfig.welcome_msg.replace("{{username}}",t.agent.user_name),(0,a.default)("#profile_screen").removeClass("is-visible"),t.socketService=new o.default(t.agent,t.ws_host),t.socketService.initSocket(t.clientID,t.welcomeMessage,t),t.chatLog=new s.default(t.agent,t.widgetConfig,t),(0,a.default)("#chat_log").empty(),t.renderChatScreen(),t.initChatScreen(),t.chatLog.scrollToLatestMessage(0))})),(0,a.default)("#cb_go_back_button").off(),(0,a.default)("#cb_go_back_button").click((function(){(0,a.default)("#profile_screen").removeClass("is-visible"),t.renderWelcomeScreen(),t.initWelcomeScreen()}))}},{key:"checkValidInput",value:function(e){var t=!0,n="",r=this.widgetConfig.fields.filter((function(t){return t.value===e}))[0],i=(0,a.default)("#vinbase_input_"+e).val();return r.required&&!i.trim()?(t=!1,n=this.errMsgs[this.language].required):("email"===r.value&&i.trim()&&!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(i.trim())||"phone"===r.value&&i.trim()&&!/(\+84|84|0)[3|5|7|8|9]+([0-9]{8})\b/g.test(i.trim()))&&(t=!1,n=this.errMsgs[this.language].invalid),{isValid:t,errMsg:n}}},{key:"removeFieldValidation",value:function(e){(0,a.default)("#vinbase_input_"+e+"_error_msg").text(""),(0,a.default)("#vinbase_input_"+e).removeClass("chat_message-error")}},{key:"validInput",value:function(e){var t=this.checkValidInput(e),n=t.isValid,r=t.errMsg;n?this.removeFieldValidation(e):((0,a.default)("#vinbase_input_"+e+"_error_msg").text(r),(0,a.default)("#vinbase_input_"+e).addClass("chat_message-error"))}},{key:"checkValidAll",value:function(){var e=[],t=this;return t.widgetConfig.fields.forEach((function(n){if(n.enable){var r=t.checkValidInput(n.value).isValid;e.push(r)}})),!e.includes(!1)}},{key:"enableProfileButton",value:function(){this.checkValidAll()?(0,a.default)("#vinbase_submit_user_info").removeClass("disabled-button"):(0,a.default)("#vinbase_submit_user_info").addClass("disabled-button")}},{key:"renderChatScreen",value:function(){if((0,a.default)("#chat_screen").addClass("is-visible"),this.useServerConfig){var e=this.widgetConfig.maximized_setting,t=e.input_place_holder;t&&(0,a.default)("#chatInput").attr("placeholder",t);var n=e.power_by_text;n&&(0,a.default)("#poweredByVinbase").text(n)}this.renderEmojiPicker(),this.persistentMenuConfig&&this.renderPersistentMenu(),this.widgetConfig.bot_type&&"click-bot"===this.widgetConfig.bot_type?((0,a.default)("#chatInput").prop("disabled",!0),(0,a.default)("#btn_emoji").hide(),(0,a.default)("#btn_send").hide()):((0,a.default)("#chatInput").prop("disabled",!1),(0,a.default)("#btn_emoji").show(),(0,a.default)("#btn_send").show()),this.widgetConfig.enable_guest_mode?((0,a.default)("#chat_minimize").hide(),(0,a.default)("#chat_action_header").show()):((0,a.default)("#chat_minimize").show(),(0,a.default)("#chat_action_header").hide())}},{key:"initChatScreen",value:function(){var e=this,t=this;this.currentScreen="chat",(0,a.default)("#prime").off(),(0,a.default)("#prime").click((function(){t.toggleChatBox(!0)})),(0,a.default)("#chat_minimize").off(),(0,a.default)("#chat_minimize").click((function(){t.toggleChatBox(!0),(0,a.default)("#aip-chat-box-subpanel").removeClass("is-visible")})),(0,a.default)("#panel_close").off(),(0,a.default)("#panel_close").click((function(){(0,a.default)("#aip-chat-box-subpanel").toggleClass("is-visible"),(0,a.default)("#aip-chat-box-subpanel").removeClass("tall-panel"),(0,a.default)("#aip-chat-box-subpanel").removeClass("compact-panel"),(0,a.default)("#panel_container_iframe").attr("src","")})),(0,a.default)("#btn_send").off(),(0,a.default)("#btn_send").click((function(){if((0,a.default)("#btn_send").removeClass("has_msg"),(0,a.default)("#sample_suggestion").removeClass("is-visible"),t.suggestionData=[],""!==t.tmpMessage.trim()){var e={sender:"user",msg:{type:"text",value:t.tmpMessage}};t.sendTextMsg(e)}else(0,a.default)("#chatInput").val(""),t.tmpMessage=""})),(0,a.default)(".menu_item").on("click","a",(function(){(0,a.default)("#btn_menu_persistent").click(),t.tmpMessage=(0,a.default)(this).text();var e={sender:"user",msg:{type:"text",value:t.tmpMessage}};t.sendTextMsg(e)})),t.clientID=t.getClientID(),""!==t.clientID&&t.chatLog.updateClientID(t.clientID),(0,a.default)("#chatInput").on("keyup",(function(n){var r=n.target.value;if(13==n.keyCode&&""!==t.tmpMessage?(0,a.default)("#btn_send").click():t.tmpMessage=r,""!==t.tmpMessage?(0,a.default)("#btn_send").addClass("has_msg"):((0,a.default)("#btn_send").removeClass("has_msg"),(0,a.default)("#sample_suggestion").removeClass("is-visible"),t.suggestionData=[]),("ArrowDown"===n.key||"ArrowUp"===n.key)&&e.suggestionData.length){n.preventDefault();var i=(0,a.default)(".sample_suggestion .menu_item"),o=(0,a.default)(".sample_suggestion .menu_item.selected")[0],s=void 0;if(o){var c=parseInt(o.getAttribute("index"));o.classList.remove("selected"),s="ArrowDown"===n.key?c<i.length-1?i[c+1]:i[0]:0!==c?i[c-1]:i[i.length-1]}else s="ArrowDown"===n.key?i[0]:i[i.length-1];s&&(s.classList.add("selected"),e.tmpMessage=s.getAttribute("content"),(0,a.default)("#chatInput").val(s.getAttribute("content")))}})),(0,a.default)("#chatInput").on("input",(function(){var e=(0,a.default)("#chatInput").val(),n=t.widgetConfig.enable_suggestion;" "===e.slice(-1)&&""!==e.trim()&&n&&((0,a.default)("body").addClass("chatboxajax"),(0,a.default)("body").addClass("chatbotajax"),a.default.ajax({url:t.baseUrl+"/api/v1/chatbot_gateway/agents/"+t.agent.id+"/channels/"+t.agent.cid+"/sample_suggestions?keyword="+e,type:"GET",headers:{token:t.agent.token},success:function(e){(0,a.default)("body").removeClass("chatboxajax"),(0,a.default)("body").removeClass("chatbotajax"),0===e.error_code&&""!==t.tmpMessage&&e.data.length&&(t.suggestionData=e.data,t.renderSuggestion())},failed:function(){(0,a.default)("body").removeClass("chatboxajax")}}))})),(0,a.default)("#chat_log").on("scroll",(function(e){if(0==(0,a.default)("#chat_log").scrollTop()&&!t.chatLog.noMoreMessage&&t.chatLog.messages[0].id){var n=document.getElementById("chat_log").scrollHeight;t.chatLog.renderPreviousChat(n)}}))}},{key:"sendTextMsg",value:function(e){this.chatLog.appendMessage(e,!0),this.socketService.sendTextMsg(e.msg.value,this.clientID),(0,a.default)("#chatInput").val(""),this.tmpMessage=""}},{key:"sendPostback",value:function(e){this.chatLog.appendMessage(e,!0),this.socketService.sendPostback(e.msg,this.clientID)}},{key:"toggleChatBox",value:function(e){(0,a.default)("#prime").toggleClass("is-float"),(0,a.default)("#prime").toggleClass("is-visible"),this.widgetConfig&&this.widgetConfig.minimized_setting&&""!=this.widgetConfig.minimized_setting.text.trim()&&!this.hideHelloMsg&&((0,a.default)("#cw_hello_message").toggleClass("is-float"),(0,a.default)("#cw_hello_message").toggleClass("is-visible")),(0,a.default)(".chat").toggleClass("is-visible"),e&&(this.isSocketOpened||(this.socketService.initSocket(this.clientID,this.welcomeMessage,this),setTimeout(this.chatLog.scrollToLatestMessage(0),1e3))),this.isLoadedEmoji||this.importEmoji()}},{key:"tooglePersistentMenu",value:function(){(0,a.default)(".menu_persistent").toggleClass("is-visible")}},{key:"toggleFullscreen",value:function(){(0,a.default)(".fullscreen").toggleClass("zmdi-window-maximize"),(0,a.default)(".fullscreen").toggleClass("zmdi-window-restore"),(0,a.default)(".chat").toggleClass("chat_fullscreen"),(0,a.default)(".fab_btn").toggleClass("is-hide"),(0,a.default)(".chat_header").toggleClass("chat_header_fullscreen"),(0,a.default)(".fab_field").toggleClass("fab_field_fullscreen"),(0,a.default)(".chat_conversion").toggleClass("chat_conversion_fullscreen")}},{key:"onSocketConnect",value:function(){var e=this;console.log("on socket connected",this.ws_host,this.clientID),setTimeout((function(){""!==e.clientID&&(console.log("join room",e.clientID),e.socketService.joinRoom(e.clientID))}),1e3)}},{key:"onSocketDisconnect",value:function(){this.socketService.reconnectSocket()}},{key:"onAuthenticated",value:function(e){if(this.isSocketOpened=!0,this.clientID=e.client_id,this.clientToken=e.client_token,this.loggedUser||this.saveClientID(e.client_id),this.chatLog.updateClientID(e.client_id),this.chatLog.updateClientToken(e.client_token),this.isNewUser||this.chatLog.renderPreviousChat(0),e.data&&this.isNewUser){var t="B\u1eaft \u0111\u1ea7u";this.useServerConfig&&(t=this.widgetConfig.profile_screen_setting.button_text);var n={sender:"user",msg:{type:"text",value:t}};if(this.chatLog.appendMessage(n,!0),"skill-trigger"===this.widgetConfig.get_started_action_type){var r={value:t,payload:this.widgetConfig.get_started_action_payload};this.socketService.sendPostback(r,this.clientID)}var i={sender:"bot",msg:e.data[0]};this.chatLog.appendMessage(i,!1)}this.socketService.joinRoom(e.client_id)}},{key:"onMessage",value:function(e){var t=this;setTimeout((function(){var n=(new Date).getTime();a.default.each(e.data,(function(e,i){var o={sender:"bot",msg:"string"===("undefined"===typeof i?"undefined":r(i))?{type:"text",value:i}:i,time_received:n};t.chatLog.appendMessage(o,!1),(0,a.default)("#botReplying").hide()}))}),300)}},{key:"onClosePopup",value:function(){document.getElementsByClassName("iframe-lightbox")[0].classList.remove("is-showing")}},{key:"getClientID",value:function(){if(this.loggedUser)return this.loggedUser.userid;return(this.isGuestUser?localStorage.getItem(this.dbNameGuest):localStorage.getItem(this.dbName))||""}},{key:"saveClientID",value:function(e){this.isGuestUser?localStorage.setItem(this.dbNameGuest,e):localStorage.setItem(this.dbName,e)}},{key:"getUserInfo",value:function(e){if(this.loggedUser)return this.loggedUser.username;var t=localStorage.getItem(e);return t||""}},{key:"setUserInfo",value:function(e,t){localStorage.setItem(e,t)}},{key:"renderEmojiPicker",value:function(){var e=this,t=(0,a.default)("#btn_emoji");(0,a.default)("#emoji_list_picker").empty(),t.off(),t.click((function(){(0,a.default)(".emoji_list_picker__wrapper").toggleClass("is-visible")}));var n=this.baseUrl+"/livechat-vinfast/assets/emoji_data/";["1f600","1f603","1f604","1f601","1f606","1f605","1f923","1f602","1f642","1f643","1f609","1f60a","1f607","1f970","1f60d","1f929","1f618","1f617","1f61a","1f619","1f60b","1f61b","1f61c","1f92a","1f61d","1f911","1f917","1f92d","1f92b","1f914","1f910","1f928","1f610","1f611","1f636","1f60f","1f612","1f644","1f62c","1f925"].forEach((function(e){var t='<span class="emoji emoji-sizer" style="background-image:url('+(n+e+".png")+')" data-codepoints="'+e+'"></span>';(0,a.default)("#emoji_list_picker").append(t)})),(0,a.default)("#emoji_list_picker").find("span.emoji-sizer").on("click",(function(t){t.preventDefault(),(0,a.default)("#btn_emoji").click();var n=(0,a.default)(t.target).attr("data-codepoints"),r=String.fromCodePoint(parseInt(n,16));e.tmpMessage+=r,(0,a.default)("#chatInput").val((0,a.default)("#chatInput").val()+r),(0,a.default)("#btn_send").hasClass("has_msg")||(0,a.default)("#btn_send").addClass("has_msg")})),(0,a.default)(document).on("click",(function(e){(0,a.default)("#btn_emoji")===e.target||(0,a.default)("#btn_emoji").has(e.target).length||(0,a.default)(".emoji_list_picker__wrapper").removeClass("is-visible")}))}},{key:"renderPersistentMenu",value:function(){var e=this;(0,a.default)("#menu_persistent").empty(),(0,a.default)("#btn_menu_persistent").addClass("is-visible"),(0,a.default)("#btn_menu_persistent").off(),(0,a.default)("#btn_menu_persistent").click((function(){e.tooglePersistentMenu()})),e.persistentMenuConfig.forEach((function(t){var n=(0,a.default)('<div class="menu_item persistent-menu"><span class="persistent-menu">'+t.title+"</span></div>");n.on("click",(function(){if("postback"===t.type){var n={sender:"user",msg:{type:"text",value:t.value,payload:t.value}};e.sendPostback(n)}else if("link"===t.type||"web_url"===t.type){(0,a.default)('<a class="btn-msg-button" href="'+t.value+'" target="_blank"></a>').click()}else if("phonenumber"===t.type){(0,a.default)('<a class="btn-msg-button" href="tel:'+t.value+'"></a>').click()}else"sidepanel"===t.type&&((0,a.default)("#panel_container_iframe").attr("src",t.value),(0,a.default)("#panel_title").text(t.title),(0,a.default)(".aip-chat-box-subpanel").removeClass("tall-panel"),(0,a.default)(".aip-chat-box-subpanel").removeClass("compact-panel"),(0,a.default)("#aip-chat-box-subpanel").hasClass("is-visible")||(0,a.default)("#aip-chat-box-subpanel").addClass("is-visible"));e.tooglePersistentMenu()})),(0,a.default)("#menu_persistent").append(n)})),(0,a.default)(document).on("click",(function(e){(0,a.default)("#btn_menu_persistent")===e.target||(0,a.default)("#btn_menu_persistent").has(e.target).length||(0,a.default)("#menu_persistent").removeClass("is-visible")}))}},{key:"renderSuggestion",value:function(){var e=this,t=this;(0,a.default)("#sample_suggestion").empty(),(0,a.default)("#sample_suggestion").hasClass("is-visible")||(0,a.default)("#sample_suggestion").addClass("is-visible"),t.suggestionData.forEach((function(n,r){var i="";n.content.split(" ").forEach((function(t){e.tmpMessage.toLowerCase().split(" ").includes(t.toLowerCase())?i+='<span style="color:var(--cw-user-bubble-color); margin:0">'+t+"</span>":i+=t,i+=" "}));var o=(0,a.default)('<div class="menu_item persistent-menu" index="'+r+'" content="'+n.content+'">'+i.trim()+"</div>");o.on("click",(function(){var e={sender:"user",msg:{type:"text",value:n.content,payload:n.content}};t.sendPostback(e),(0,a.default)("#sample_suggestion").removeClass("is-visible"),(0,a.default)("#chatInput").val(""),(0,a.default)("#btn_send").removeClass("has_msg")})),(0,a.default)("#sample_suggestion").append(o)}))}},{key:"getBotLanguage",value:function(){var e=localStorage.getItem("aip-chatbot-language");return e||"vi"}},{key:"setBotLanguage",value:function(e){localStorage.setItem("aip-chatbot-language",e)}},{key:"getLoggedUser",value:function(){var e=localStorage.getItem("aip-chatbot-user");return e?JSON.parse(e):void 0}},{key:"renderSwitchLanguage",value:function(){var e=this;(0,a.default)("#chatbot_language_code").text(e.language.toUpperCase()),e.enableMultiLanguage&&(0,a.default)("#chat_switch_language").addClass("is-visible"),(0,a.default)("#chat_switch_language").click((function(){e.toogleSwitchLanguage()}));var t=[];e.supportedLanguage.forEach((function(n){var r=void 0;r=n===e.language?(0,a.default)("<div class='menu-switch-language-item selected'><span>"+e.allLanguages[n]+"</span></div>"):(0,a.default)("<div class='menu-switch-language-item'><span>"+e.allLanguages[n]+"</span></div>"),t.push(r),r.on("click",(function(){(0,a.default)("#menu_switch_language").removeClass("is-visible"),n!==e.language&&(e.setBotLanguage(n),e.applyLanguage(n),t.forEach((function(e){e===r?e.addClass("selected"):e.removeClass("selected")})))})),(0,a.default)("#menu_switch_language").append(r)})),(0,a.default)(document).on("click",(function(e){(0,a.default)("#chat_switch_language")===e.target||(0,a.default)("#chat_switch_language").has(e.target).length||(0,a.default)("#menu_switch_language").removeClass("is-visible")}))}},{key:"renderHeaderMenu",value:function(){var e=this;if(this.widgetConfig.enable_guest_mode){var t=this;(0,a.default)("#chat_action_header").off(),(0,a.default)("#chat_action_header").click((function(){e.toogleHeaderMenu()})),(0,a.default)("#menu_header_action").empty();var n=(0,a.default)("<div class='menu-header-action-item'><span>"+this.widgetConfig.guest_mode_setting.end_conversation+"</span></div>"),r=(0,a.default)("<div class='menu-header-action-item'><span>"+this.widgetConfig.guest_mode_setting.hide_conversation+"</span></div>");n.on("click",(function(){e.isGuestUser&&(localStorage.removeItem(e.dbNameGuest),localStorage.removeItem("guestname"),localStorage.removeItem("isGuestUser")),t.socketService.deleteSocket(),(0,a.default)("#chat_screen").removeClass("is-visible"),e.renderWelcomeScreen(),e.initWelcomeScreen()})),r.on("click",(function(){t.toggleChatBox()})),(0,a.default)("#menu_header_action").append(n),(0,a.default)("#menu_header_action").append(r),(0,a.default)(document).on("click",(function(e){(0,a.default)("#chat_action_header")===e.target||(0,a.default)("#chat_action_header").has(e.target).length||(0,a.default)("#menu_header_action").removeClass("is-visible")}))}}},{key:"toogleSwitchLanguage",value:function(){(0,a.default)(".menu_switch_language").toggleClass("is-visible")}},{key:"toogleHeaderMenu",value:function(){(0,a.default)(".menu_header_action").toggleClass("is-visible")}},{key:"applyLanguage",value:function(e){this.language=e,(0,a.default)("#chatbot_language_code").text(this.language.toUpperCase());var t=this.multiLanguageSetting[e]?this.multiLanguageSetting[e]:this.multiLanguageSetting.vi;this.widgetConfig=Object.assign(this.agent,t),this.persistentMenuConfig=this.widgetConfig.maximized_setting.persistent_menu_setting;var n=this.widgetConfig.profile_screen_setting;if(this.widgetConfig.get_started_action_type=n.get_started_action_type,this.widgetConfig.get_started_action_payload=n.get_started_action_value?n.get_started_action_value.payload:"",this.widgetConfig.fields=n.fields,this.widgetConfig.introduce_msg=n.title,this.applyStyle(),this.renderPoweredBy(),this.renderMinimized(),this.renderHeaderMenu(),(0,a.default)("#cw_hello_message").removeClass("is-visible"),"welcome"===this.currentScreen)this.useWelcomeScreen=this.widgetConfig.welcome_screen_setting.is_enabled,this.useWelcomeScreen?this.renderWelcomeScreen():(0,a.default)("#welcome_screen_button").click();else if("profile"===this.currentScreen)this.renderProfileScreen(),this.initProfileScreen();else if("survey"===this.currentScreen){var r=this.widgetConfig.survey_screen_setting;r&&r.is_enabled&&r.questions.length?(this.renderSurveyScreen(),this.initSurveyScreen()):((0,a.default)("#survey_screen").removeClass("is-visible"),this.renderChatScreen(),this.initChatScreen())}else"chat"===this.currentScreen&&(this.renderChatScreen(),this.initChatScreen())}},{key:"controlChatBox",value:function(){(0,a.default)("#prime").click()}}],[{key:"getInstance",value:function(){return this.instance||(this.instance=new e),this.instance}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(34),s=(r=o)&&r.__esModule?r:{default:r};var a=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.agent=t,this.ws_host=n,this.socket=void 0,this.connected=!1,this.subcriber=void 0}return i(e,[{key:"initSocket",value:function(e,t,n){var r=this;console.log("initSocket"),this.socket||(this.subcriber=n,this.socket=(0,s.default)(this.ws_host+"/api/v1/chat_gateway",{transports:["websocket"],reconnection:!0,reconnectionDelay:500,reconnectionAttempts:10,upgrade:!1,query:{token:this.agent.token,agent_id:this.agent.id,client_id:e,welcome_msg:t,user_name:this.agent.user_name,user_email:this.agent.user_email,user_phone:this.agent.user_phone}}),this.socket.on("connect",(function(){r.connected=!0,n.onSocketConnect()})),this.socket.on("disconnect",(function(){n.onSocketDisconnect()})),this.socket.on("on_authenticated",(function(e){n.onAuthenticated(e)})),this.socket.on("on_bot_message",(function(e){n.onMessage(e)})),this.socket.on("close_popup",(function(){n.onClosePopup()})))}},{key:"deleteSocket",value:function(){this.socket&&(this.socket.emit("disconnect_request"),this.socket=void 0,console.log("Socket is deleted"))}},{key:"reconnectSocket",value:function(){this.socket&&this.socket.connect()}},{key:"joinRoom",value:function(e){this.socket.emit("join_room",e)}},{key:"sendTextMsg",value:function(e,t){if(this.socket){var n={data:e,agent_id:this.agent.id,channel_id:this.agent.cid,client_id:t,user_name:this.agent.user_name,user_email:this.agent.user_email,user_phone:this.agent.user_phone,timestamp:(new Date).getTime(),language:this.subcriber.language};this.socket.emit("on_user_message",n)}}},{key:"sendPostback",value:function(e,t){this.socket&&this.socket.emit("on_user_postback",{data:e.value,data_payload:e.payload,language:this.subcriber.language,agent_id:this.agent.id,channel_id:this.agent.cid,client_id:t,user_name:this.agent.user_name,user_email:this.agent.user_email,user_phone:this.agent.user_phone})}}]),e}();t.default=a},function(e,t,n){var r=n(35),i=n(9),o=n(17),s=n(2)("socket.io-client");e.exports=t=c;var a=t.managers={};function c(e,t){"object"===typeof e&&(t=e,e=void 0),t=t||{};var n,i=r(e),c=i.source,u=i.id,l=i.path,f=a[u]&&l in a[u].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||f?(s("ignoring socket cache for %s",c),n=o(c,t)):(a[u]||(s("new io instance for %s",c),a[u]=o(c,t)),n=a[u]),i.query&&!t.query&&(t.query=i.query),n.socket(i.path,t)}t.protocol=i.protocol,t.connect=c,t.Manager=n(17),t.Socket=n(23)},function(e,t,n){var r=n(14),i=n(2)("socket.io-client:url");e.exports=function(e,t){var n=e;t=t||"undefined"!==typeof location&&location,null==e&&(e=t.protocol+"//"+t.host);"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?t.protocol+e:t.host+e),/^(https?|wss?):\/\//.test(e)||(i("protocol-less url %s",e),e="undefined"!==typeof t?t.protocol+"//"+e:"https://"+e),i("parse %s",e),n=r(e));n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443"));n.path=n.path||"/";var o=-1!==n.host.indexOf(":")?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+o+":"+n.port,n.href=n.protocol+"://"+o+(t&&t.port===n.port?"":":"+n.port),n}},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,i=+new Date,o=i-(n||i);e.diff=o,e.prev=n,e.curr=i,n=i;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!==typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;c++;var i=t.formatters[r];if("function"===typeof i){var o=s[c];n=i.call(e,o),s.splice(c,1),c--}return n})),t.formatArgs.call(e,s);var u=r.log||t.log||console.log.bind(console);u.apply(e,s)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=i,"function"===typeof t.init&&t.init(r),t.instances.push(r),r}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"===typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var o=t.instances[n];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(8),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,n){(function(r){function i(){var e;try{e=t.storage.debug}catch(e){}return!e&&"undefined"!==typeof r&&"env"in r&&(e=r.env.DEBUG),e}(t=e.exports=n(38)).log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))})),e.splice(o,0,r)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=i,t.useColors=function(){if("undefined"!==typeof window&&window.process&&"renderer"===window.process.type)return!0;if("undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(i())}).call(this,n(7))},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,i=+new Date,o=i-(n||i);e.diff=o,e.prev=n,e.curr=i,n=i;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!==typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;c++;var i=t.formatters[r];if("function"===typeof i){var o=s[c];n=i.call(e,o),s.splice(c,1),c--}return n})),t.formatArgs.call(e,s);var u=r.log||t.log||console.log.bind(console);u.apply(e,s)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=i,"function"===typeof t.init&&t.init(r),t.instances.push(r),r}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"===typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var o=t.instances[n];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(8),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,n){var r=n(15),i=n(16),o=Object.prototype.toString,s="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===o.call(Blob),a="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===o.call(File);t.deconstructPacket=function(e){var t=[],n=e.data,o=e;return o.data=function e(t,n){if(!t)return t;if(i(t)){var o={_placeholder:!0,num:n.length};return n.push(t),o}if(r(t)){for(var s=new Array(t.length),a=0;a<t.length;a++)s[a]=e(t[a],n);return s}if("object"===typeof t&&!(t instanceof Date)){s={};for(var c in t)s[c]=e(t[c],n);return s}return t}(n,t),o.attachments=t.length,{packet:o,buffers:t}},t.reconstructPacket=function(e,t){return e.data=function e(t,n){if(!t)return t;if(t&&t._placeholder)return n[t.num];if(r(t))for(var i=0;i<t.length;i++)t[i]=e(t[i],n);else if("object"===typeof t)for(var o in t)t[o]=e(t[o],n);return t}(e.data,t),e.attachments=void 0,e},t.removeBlobs=function(e,t){var n=0,o=e;!function e(c,u,l){if(!c)return c;if(s&&c instanceof Blob||a&&c instanceof File){n++;var f=new FileReader;f.onload=function(){l?l[u]=this.result:o=this.result,--n||t(o)},f.readAsArrayBuffer(c)}else if(r(c))for(var h=0;h<c.length;h++)e(c[h],h,c);else if("object"===typeof c&&!i(c))for(var p in c)e(c[p],p,c)}(o),n||t(o)}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";t.byteLength=function(e){var t=u(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,r=u(e),s=r[0],a=r[1],c=new o(function(e,t,n){return 3*(t+n)/4-n}(0,s,a)),l=0,f=a>0?s-4:s;for(n=0;n<f;n+=4)t=i[e.charCodeAt(n)]<<18|i[e.charCodeAt(n+1)]<<12|i[e.charCodeAt(n+2)]<<6|i[e.charCodeAt(n+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;2===a&&(t=i[e.charCodeAt(n)]<<2|i[e.charCodeAt(n+1)]>>4,c[l++]=255&t);1===a&&(t=i[e.charCodeAt(n)]<<10|i[e.charCodeAt(n+1)]<<4|i[e.charCodeAt(n+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t);return c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],s=0,a=n-i;s<a;s+=16383)o.push(l(e,s,s+16383>a?a:s+16383));1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return o.join("")};for(var r=[],i=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=s.length;a<c;++a)r[a]=s[a],i[s.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function l(e,t,n){for(var i,o,s=[],a=t;a<n;a+=3)i=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,n,r,i){var o,s,a=8*i-r-1,c=(1<<a)-1,u=c>>1,l=-7,f=n?i-1:0,h=n?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+e[t+f],f+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=r;l>0;s=256*s+e[t+f],f+=h,l-=8);if(0===o)o=1-u;else{if(o===c)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,r),o-=u}return(p?-1:1)*s*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var s,a,c,u=8*o-i-1,l=(1<<u)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+f>=1?h/c:h*Math.pow(2,1-f))*c>=2&&(s++,c/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(t*c-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[n+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;e[n+p]=255&s,p+=d,s/=256,u-=8);e[n+p-d]|=128*g}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t,n){e.exports=n(45),e.exports.parser=n(1)},function(e,t,n){var r=n(18),i=n(0),o=n(5)("engine.io-client:socket"),s=n(22),a=n(1),c=n(14),u=n(3);function l(e,t){if(!(this instanceof l))return new l(e,t);t=t||{},e&&"object"===typeof e&&(t=e,e=null),e?(e=c(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=c(t.host).host),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.agent=t.agent||!1,this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?443:80),this.query=t.query||{},"string"===typeof this.query&&(this.query=u.decode(this.query)),this.upgrade=!1!==t.upgrade,this.path=(t.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!t.forceJSONP,this.jsonp=!1!==t.jsonp,this.forceBase64=!!t.forceBase64,this.enablesXDR=!!t.enablesXDR,this.withCredentials=!1!==t.withCredentials,this.timestampParam=t.timestampParam||"t",this.timestampRequests=t.timestampRequests,this.transports=t.transports||["polling","websocket"],this.transportOptions=t.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=t.policyPort||843,this.rememberUpgrade=t.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=t.onlyBinaryUpgrades,this.perMessageDeflate=!1!==t.perMessageDeflate&&(t.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=t.pfx||void 0,this.key=t.key||void 0,this.passphrase=t.passphrase||void 0,this.cert=t.cert||void 0,this.ca=t.ca||void 0,this.ciphers=t.ciphers||void 0,this.rejectUnauthorized=void 0===t.rejectUnauthorized||t.rejectUnauthorized,this.forceNode=!!t.forceNode,this.isReactNative="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),("undefined"===typeof self||this.isReactNative)&&(t.extraHeaders&&Object.keys(t.extraHeaders).length>0&&(this.extraHeaders=t.extraHeaders),t.localAddress&&(this.localAddress=t.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=l,l.priorWebsocketSuccess=!1,i(l.prototype),l.protocol=a.protocol,l.Socket=l,l.Transport=n(13),l.transports=n(18),l.parser=n(1),l.prototype.createTransport=function(e){o('creating transport "%s"',e);var t=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}(this.query);t.EIO=a.protocol,t.transport=e;var n=this.transportOptions[e]||{};return this.id&&(t.sid=this.id),new r[e]({query:t,socket:this,agent:n.agent||this.agent,hostname:n.hostname||this.hostname,port:n.port||this.port,secure:n.secure||this.secure,path:n.path||this.path,forceJSONP:n.forceJSONP||this.forceJSONP,jsonp:n.jsonp||this.jsonp,forceBase64:n.forceBase64||this.forceBase64,enablesXDR:n.enablesXDR||this.enablesXDR,withCredentials:n.withCredentials||this.withCredentials,timestampRequests:n.timestampRequests||this.timestampRequests,timestampParam:n.timestampParam||this.timestampParam,policyPort:n.policyPort||this.policyPort,pfx:n.pfx||this.pfx,key:n.key||this.key,passphrase:n.passphrase||this.passphrase,cert:n.cert||this.cert,ca:n.ca||this.ca,ciphers:n.ciphers||this.ciphers,rejectUnauthorized:n.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:n.perMessageDeflate||this.perMessageDeflate,extraHeaders:n.extraHeaders||this.extraHeaders,forceNode:n.forceNode||this.forceNode,localAddress:n.localAddress||this.localAddress,requestTimeout:n.requestTimeout||this.requestTimeout,protocols:n.protocols||void 0,isReactNative:this.isReactNative})},l.prototype.open=function(){var e;if(this.rememberUpgrade&&l.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length){var t=this;return void setTimeout((function(){t.emit("error","No transports available")}),0)}e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(e){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)},l.prototype.setTransport=function(e){o("setting transport %s",e.name);var t=this;this.transport&&(o("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=e,e.on("drain",(function(){t.onDrain()})).on("packet",(function(e){t.onPacket(e)})).on("error",(function(e){t.onError(e)})).on("close",(function(){t.onClose("transport close")}))},l.prototype.probe=function(e){o('probing transport "%s"',e);var t=this.createTransport(e,{probe:1}),n=!1,r=this;function i(){if(r.onlyBinaryUpgrades){var i=!this.supportsBinary&&r.transport.supportsBinary;n=n||i}n||(o('probe transport "%s" opened',e),t.send([{type:"ping",data:"probe"}]),t.once("packet",(function(i){if(!n)if("pong"===i.type&&"probe"===i.data){if(o('probe transport "%s" pong',e),r.upgrading=!0,r.emit("upgrading",t),!t)return;l.priorWebsocketSuccess="websocket"===t.name,o('pausing current transport "%s"',r.transport.name),r.transport.pause((function(){n||"closed"!==r.readyState&&(o("changing transport and sending upgrade packet"),h(),r.setTransport(t),t.send([{type:"upgrade"}]),r.emit("upgrade",t),t=null,r.upgrading=!1,r.flush())}))}else{o('probe transport "%s" failed',e);var s=new Error("probe error");s.transport=t.name,r.emit("upgradeError",s)}})))}function s(){n||(n=!0,h(),t.close(),t=null)}function a(n){var i=new Error("probe error: "+n);i.transport=t.name,s(),o('probe transport "%s" failed because of error: %s',e,n),r.emit("upgradeError",i)}function c(){a("transport closed")}function u(){a("socket closed")}function f(e){t&&e.name!==t.name&&(o('"%s" works - aborting "%s"',e.name,t.name),s())}function h(){t.removeListener("open",i),t.removeListener("error",a),t.removeListener("close",c),r.removeListener("close",u),r.removeListener("upgrading",f)}l.priorWebsocketSuccess=!1,t.once("open",i),t.once("error",a),t.once("close",c),this.once("close",u),this.once("upgrading",f),t.open()},l.prototype.onOpen=function(){if(o("socket open"),this.readyState="open",l.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause){o("starting upgrade probes");for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},l.prototype.onPacket=function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(o('socket receive: type "%s", data "%s"',e.type,e.data),this.emit("packet",e),this.emit("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emit("data",e.data),this.emit("message",e.data)}else o('packet received with socket readyState "%s"',this.readyState)},l.prototype.onHandshake=function(e){this.emit("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},l.prototype.onHeartbeat=function(e){clearTimeout(this.pingTimeoutTimer);var t=this;t.pingTimeoutTimer=setTimeout((function(){"closed"!==t.readyState&&t.onClose("ping timeout")}),e||t.pingInterval+t.pingTimeout)},l.prototype.setPing=function(){var e=this;clearTimeout(e.pingIntervalTimer),e.pingIntervalTimer=setTimeout((function(){o("writing ping packet - expecting pong within %sms",e.pingTimeout),e.ping(),e.onHeartbeat(e.pingTimeout)}),e.pingInterval)},l.prototype.ping=function(){var e=this;this.sendPacket("ping",(function(){e.emit("ping")}))},l.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},l.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(o("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},l.prototype.write=l.prototype.send=function(e,t,n){return this.sendPacket("message",e,t,n),this},l.prototype.sendPacket=function(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emit("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}},l.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var e=this;this.writeBuffer.length?this.once("drain",(function(){this.upgrading?r():t()})):this.upgrading?r():t()}function t(){e.onClose("forced close"),o("socket closing - telling transport to close"),e.transport.close()}function n(){e.removeListener("upgrade",n),e.removeListener("upgradeError",n),t()}function r(){e.once("upgrade",n),e.once("upgradeError",n)}return this},l.prototype.onError=function(e){o("socket error %j",e),l.priorWebsocketSuccess=!1,this.emit("error",e),this.onClose("transport error",e)},l.prototype.onClose=function(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){o('socket close with reason: "%s"',e);clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",e,t),this.writeBuffer=[],this.prevBufferLen=0}},l.prototype.filterUpgrades=function(e){for(var t=[],n=0,r=e.length;n<r;n++)~s(this.transports,e[n])&&t.push(e[n]);return t}},function(e,t){try{e.exports="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},function(e,t,n){var r=n(11),i=n(19),o=n(0),s=n(4),a=n(5)("engine.io-client:polling-xhr"),c=n(12);function u(){}function l(e){if(i.call(this,e),this.requestTimeout=e.requestTimeout,this.extraHeaders=e.extraHeaders,"undefined"!==typeof location){var t="https:"===location.protocol,n=location.port;n||(n=t?443:80),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||n!==e.port,this.xs=e.secure!==t}}function f(e){this.method=e.method||"GET",this.uri=e.uri,this.xd=!!e.xd,this.xs=!!e.xs,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.agent=e.agent,this.isBinary=e.isBinary,this.supportsBinary=e.supportsBinary,this.enablesXDR=e.enablesXDR,this.withCredentials=e.withCredentials,this.requestTimeout=e.requestTimeout,this.pfx=e.pfx,this.key=e.key,this.passphrase=e.passphrase,this.cert=e.cert,this.ca=e.ca,this.ciphers=e.ciphers,this.rejectUnauthorized=e.rejectUnauthorized,this.extraHeaders=e.extraHeaders,this.create()}if(e.exports=l,e.exports.Request=f,s(l,i),l.prototype.supportsBinary=!0,l.prototype.request=function(e){return(e=e||{}).uri=this.uri(),e.xd=this.xd,e.xs=this.xs,e.agent=this.agent||!1,e.supportsBinary=this.supportsBinary,e.enablesXDR=this.enablesXDR,e.withCredentials=this.withCredentials,e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized,e.requestTimeout=this.requestTimeout,e.extraHeaders=this.extraHeaders,new f(e)},l.prototype.doWrite=function(e,t){var n="string"!==typeof e&&void 0!==e,r=this.request({method:"POST",data:e,isBinary:n}),i=this;r.on("success",t),r.on("error",(function(e){i.onError("xhr post error",e)})),this.sendXhr=r},l.prototype.doPoll=function(){a("xhr poll");var e=this.request(),t=this;e.on("data",(function(e){t.onData(e)})),e.on("error",(function(e){t.onError("xhr poll error",e)})),this.pollXhr=e},o(f.prototype),f.prototype.create=function(){var e={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};e.pfx=this.pfx,e.key=this.key,e.passphrase=this.passphrase,e.cert=this.cert,e.ca=this.ca,e.ciphers=this.ciphers,e.rejectUnauthorized=this.rejectUnauthorized;var t=this.xhr=new r(e),n=this;try{a("xhr open %s: %s",this.method,this.uri),t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(var i in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(i)&&t.setRequestHeader(i,this.extraHeaders[i])}catch(e){}if("POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(e){}try{t.setRequestHeader("Accept","*/*")}catch(e){}"withCredentials"in t&&(t.withCredentials=this.withCredentials),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){n.onLoad()},t.onerror=function(){n.onError(t.responseText)}):t.onreadystatechange=function(){if(2===t.readyState)try{var e=t.getResponseHeader("Content-Type");(n.supportsBinary&&"application/octet-stream"===e||"application/octet-stream; charset=UTF-8"===e)&&(t.responseType="arraybuffer")}catch(e){}4===t.readyState&&(200===t.status||1223===t.status?n.onLoad():setTimeout((function(){n.onError("number"===typeof t.status?t.status:0)}),0))},a("xhr data %s",this.data),t.send(this.data)}catch(e){return void setTimeout((function(){n.onError(e)}),0)}"undefined"!==typeof document&&(this.index=f.requestsCount++,f.requests[this.index]=this)},f.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},f.prototype.onData=function(e){this.emit("data",e),this.onSuccess()},f.prototype.onError=function(e){this.emit("error",e),this.cleanup(!0)},f.prototype.cleanup=function(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=u:this.xhr.onreadystatechange=u,e)try{this.xhr.abort()}catch(e){}"undefined"!==typeof document&&delete f.requests[this.index],this.xhr=null}},f.prototype.onLoad=function(){var e;try{var t;try{t=this.xhr.getResponseHeader("Content-Type")}catch(e){}e=("application/octet-stream"===t||"application/octet-stream; charset=UTF-8"===t)&&this.xhr.response||this.xhr.responseText}catch(e){this.onError(e)}null!=e&&this.onData(e)},f.prototype.hasXDR=function(){return"undefined"!==typeof XDomainRequest&&!this.xs&&this.enablesXDR},f.prototype.abort=function(){this.cleanup()},f.requestsCount=0,f.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",h);else if("function"===typeof addEventListener){addEventListener("onpagehide"in c?"pagehide":"unload",h,!1)}function h(){for(var e in f.requests)f.requests.hasOwnProperty(e)&&f.requests[e].abort()}},function(e,t){e.exports=Object.keys||function(e){var t=[],n=Object.prototype.hasOwnProperty;for(var r in e)n.call(e,r)&&t.push(r);return t}},function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},function(e,t){e.exports=function(e,t,n){var r=e.byteLength;if(t=t||0,n=n||r,e.slice)return e.slice(t,n);if(t<0&&(t+=r),n<0&&(n+=r),n>r&&(n=r),t>=r||t>=n||0===r)return new ArrayBuffer(0);for(var i=new Uint8Array(e),o=new Uint8Array(n-t),s=t,a=0;s<n;s++,a++)o[a]=i[s];return o.buffer}},function(e,t){function n(){}e.exports=function(e,t,r){var i=!1;return r=r||n,o.count=e,0===e?t():o;function o(e,n){if(o.count<=0)throw new Error("after called too many times");--o.count,e?(i=!0,t(e),t=r):0!==o.count||i||t(null,n)}}},function(e,t){var n,r,i,o=String.fromCharCode;function s(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function a(e,t){if(e>=55296&&e<=57343){if(t)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function c(e,t){return o(e>>t&63|128)}function u(e,t){if(0==(4294967168&e))return o(e);var n="";return 0==(4294965248&e)?n=o(e>>6&31|192):0==(4294901760&e)?(a(e,t)||(e=65533),n=o(e>>12&15|224),n+=c(e,6)):0==(4292870144&e)&&(n=o(e>>18&7|240),n+=c(e,12),n+=c(e,6)),n+=o(63&e|128)}function l(){if(i>=r)throw Error("Invalid byte index");var e=255&n[i];if(i++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function f(e){var t,o;if(i>r)throw Error("Invalid byte index");if(i==r)return!1;if(t=255&n[i],i++,0==(128&t))return t;if(192==(224&t)){if((o=(31&t)<<6|l())>=128)return o;throw Error("Invalid continuation byte")}if(224==(240&t)){if((o=(15&t)<<12|l()<<6|l())>=2048)return a(o,e)?o:65533;throw Error("Invalid continuation byte")}if(240==(248&t)&&(o=(7&t)<<18|l()<<12|l()<<6|l())>=65536&&o<=1114111)return o;throw Error("Invalid UTF-8 detected")}e.exports={version:"2.1.2",encode:function(e,t){for(var n=!1!==(t=t||{}).strict,r=s(e),i=r.length,o=-1,a="";++o<i;)a+=u(r[o],n);return a},decode:function(e,t){var a=!1!==(t=t||{}).strict;n=s(e),r=n.length,i=0;for(var c,u=[];!1!==(c=f(a));)u.push(c);return function(e){for(var t,n=e.length,r=-1,i="";++r<n;)(t=e[r])>65535&&(i+=o((t-=65536)>>>10&1023|55296),t=56320|1023&t),i+=o(t);return i}(u)}}},function(e,t){!function(e){"use strict";t.encode=function(t){var n,r=new Uint8Array(t),i=r.length,o="";for(n=0;n<i;n+=3)o+=e[r[n]>>2],o+=e[(3&r[n])<<4|r[n+1]>>4],o+=e[(15&r[n+1])<<2|r[n+2]>>6],o+=e[63&r[n+2]];return i%3===2?o=o.substring(0,o.length-1)+"=":i%3===1&&(o=o.substring(0,o.length-2)+"=="),o},t.decode=function(t){var n,r,i,o,s,a=.75*t.length,c=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var l=new ArrayBuffer(a),f=new Uint8Array(l);for(n=0;n<c;n+=4)r=e.indexOf(t[n]),i=e.indexOf(t[n+1]),o=e.indexOf(t[n+2]),s=e.indexOf(t[n+3]),f[u++]=r<<2|i>>4,f[u++]=(15&i)<<4|o>>2,f[u++]=(3&o)<<6|63&s;return l}}("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")},function(e,t){var n="undefined"!==typeof n?n:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder&&MozBlobBuilder,r=function(){try{return 2===new Blob(["hi"]).size}catch(e){return!1}}(),i=r&&function(){try{return 2===new Blob([new Uint8Array([1,2])]).size}catch(e){return!1}}(),o=n&&n.prototype.append&&n.prototype.getBlob;function s(e){return e.map((function(e){if(e.buffer instanceof ArrayBuffer){var t=e.buffer;if(e.byteLength!==t.byteLength){var n=new Uint8Array(e.byteLength);n.set(new Uint8Array(t,e.byteOffset,e.byteLength)),t=n.buffer}return t}return e}))}function a(e,t){t=t||{};var r=new n;return s(e).forEach((function(e){r.append(e)})),t.type?r.getBlob(t.type):r.getBlob()}function c(e,t){return new Blob(s(e),t||{})}"undefined"!==typeof Blob&&(a.prototype=Blob.prototype,c.prototype=Blob.prototype),e.exports=r?i?Blob:c:o?a:void 0},function(e,t,n){function r(e){var n;function r(){if(r.enabled){var e=r,i=+new Date,o=i-(n||i);e.diff=o,e.prev=n,e.curr=i,n=i;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=t.coerce(s[0]),"string"!==typeof s[0]&&s.unshift("%O");var c=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;c++;var i=t.formatters[r];if("function"===typeof i){var o=s[c];n=i.call(e,o),s.splice(c,1),c--}return n})),t.formatArgs.call(e,s);var u=r.log||t.log||console.log.bind(console);u.apply(e,s)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var n,r=0;for(n in e)r=(r<<5)-r+e.charCodeAt(n),r|=0;return t.colors[Math.abs(r)%t.colors.length]}(e),r.destroy=i,"function"===typeof t.init&&t.init(r),t.instances.push(r),r}function i(){var e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){var n;t.save(e),t.names=[],t.skips=[];var r=("string"===typeof e?e:"").split(/[\s,]+/),i=r.length;for(n=0;n<i;n++)r[n]&&("-"===(e=r[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){var o=t.instances[n];o.enabled=t.enabled(o.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;var n,r;for(n=0,r=t.skips.length;n<r;n++)if(t.skips[n].test(e))return!1;for(n=0,r=t.names.length;n<r;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(8),t.instances=[],t.names=[],t.skips=[],t.formatters={}},function(e,t,n){var r=n(19),i=n(4),o=n(12);e.exports=l;var s,a=/\n/g,c=/\\n/g;function u(){}function l(e){r.call(this,e),this.query=this.query||{},s||(s=o.___eio=o.___eio||[]),this.index=s.length;var t=this;s.push((function(e){t.onData(e)})),this.query.j=this.index,"function"===typeof addEventListener&&addEventListener("beforeunload",(function(){t.script&&(t.script.onerror=u)}),!1)}i(l,r),l.prototype.supportsBinary=!1,l.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),r.prototype.doClose.call(this)},l.prototype.doPoll=function(){var e=this,t=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),t.async=!0,t.src=this.uri(),t.onerror=function(t){e.onError("jsonp poll error",t)};var n=document.getElementsByTagName("script")[0];n?n.parentNode.insertBefore(t,n):(document.head||document.body).appendChild(t),this.script=t,"undefined"!==typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout((function(){var e=document.createElement("iframe");document.body.appendChild(e),document.body.removeChild(e)}),100)},l.prototype.doWrite=function(e,t){var n=this;if(!this.form){var r,i=document.createElement("form"),o=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index;i.className="socketio",i.style.position="absolute",i.style.top="-1000px",i.style.left="-1000px",i.target=s,i.method="POST",i.setAttribute("accept-charset","utf-8"),o.name="d",i.appendChild(o),document.body.appendChild(i),this.form=i,this.area=o}function u(){l(),t()}function l(){if(n.iframe)try{n.form.removeChild(n.iframe)}catch(e){n.onError("jsonp polling iframe removal error",e)}try{var e='<iframe src="javascript:0" name="'+n.iframeId+'">';r=document.createElement(e)}catch(e){(r=document.createElement("iframe")).name=n.iframeId,r.src="javascript:0"}r.id=n.iframeId,n.form.appendChild(r),n.iframe=r}this.form.action=this.uri(),l(),e=e.replace(c,"\\\n"),this.area.value=e.replace(a,"\\n");try{this.form.submit()}catch(e){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===n.iframe.readyState&&u()}:this.iframe.onload=u}},function(e,t,n){(function(t){var r,i,o=n(13),s=n(1),a=n(3),c=n(4),u=n(21),l=n(5)("engine.io-client:websocket");if("undefined"!==typeof WebSocket?r=WebSocket:"undefined"!==typeof self&&(r=self.WebSocket||self.MozWebSocket),"undefined"===typeof window)try{i=n(58)}catch(e){}var f=r||i;function h(e){e&&e.forceBase64&&(this.supportsBinary=!1),this.perMessageDeflate=e.perMessageDeflate,this.usingBrowserWebSocket=r&&!e.forceNode,this.protocols=e.protocols,this.usingBrowserWebSocket||(f=i),o.call(this,e)}e.exports=h,c(h,o),h.prototype.name="websocket",h.prototype.supportsBinary=!0,h.prototype.doOpen=function(){if(this.check()){var e=this.uri(),t=this.protocols,n={};this.isReactNative||(n.agent=this.agent,n.perMessageDeflate=this.perMessageDeflate,n.pfx=this.pfx,n.key=this.key,n.passphrase=this.passphrase,n.cert=this.cert,n.ca=this.ca,n.ciphers=this.ciphers,n.rejectUnauthorized=this.rejectUnauthorized),this.extraHeaders&&(n.headers=this.extraHeaders),this.localAddress&&(n.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket&&!this.isReactNative?t?new f(e,t):new f(e):new f(e,t,n)}catch(e){return this.emit("error",e)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},h.prototype.addEventListeners=function(){var e=this;this.ws.onopen=function(){e.onOpen()},this.ws.onclose=function(){e.onClose()},this.ws.onmessage=function(t){e.onData(t.data)},this.ws.onerror=function(t){e.onError("websocket error",t)}},h.prototype.write=function(e){var n=this;this.writable=!1;for(var r=e.length,i=0,o=r;i<o;i++)!function(e){s.encodePacket(e,n.supportsBinary,(function(i){if(!n.usingBrowserWebSocket){var o={};if(e.options&&(o.compress=e.options.compress),n.perMessageDeflate)("string"===typeof i?t.byteLength(i):i.length)<n.perMessageDeflate.threshold&&(o.compress=!1)}try{n.usingBrowserWebSocket?n.ws.send(i):n.ws.send(i,o)}catch(e){l("websocket closed before onclose event")}--r||a()}))}(e[i]);function a(){n.emit("flush"),setTimeout((function(){n.writable=!0,n.emit("drain")}),0)}},h.prototype.onClose=function(){o.prototype.onClose.call(this)},h.prototype.doClose=function(){"undefined"!==typeof this.ws&&this.ws.close()},h.prototype.uri=function(){var e=this.query||{},t=this.secure?"wss":"ws",n="";return this.port&&("wss"===t&&443!==Number(this.port)||"ws"===t&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=u()),this.supportsBinary||(e.b64=1),(e=a.encode(e)).length&&(e="?"+e),t+"://"+(-1!==this.hostname.indexOf(":")?"["+this.hostname+"]":this.hostname)+n+this.path+e},h.prototype.check=function(){return!!f&&!("__initialize"in f&&this.name===h.prototype.name)}}).call(this,n(10).Buffer)},function(e,t){},function(e,t){e.exports=function(e,t){for(var n=[],r=(t=t||0)||0;r<e.length;r++)n[r-t]=e[r];return n}},function(e,t){function n(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e.exports=n,n.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},n.prototype.reset=function(){this.attempts=0},n.prototype.setMin=function(e){this.ms=e},n.prototype.setMax=function(e){this.max=e},n.prototype.setJitter=function(e){this.jitter=e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(26),a=(r=s)&&r.__esModule?r:{default:r};function c(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}String.prototype.escape=function(){var e={"&":"&amp;","<":"&lt;",">":"&gt;"};return this.replace(/[&<>]/g,(function(t){return e[t]||t}))};var u=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.messages=[],this.sender=r,this.widgetConfig=n,this.agent=t,this.container=(0,a.default)(".chat_log")[0],this.sendPostback=function(e){r.sendPostback(e)},this.firstSender=void 0,this.firstContainer=void 0,this.currentSender=void 0,this.currentContainer=void 0,this.noMoreMessage=!1,this.clientID=r.clientID,this.clientToken=r.clientToken,this.emojiConvertor=void 0}return o(e,[{key:"initEmojiConvertor",value:function(){this.sender.isLoadedEmoji&&(this.emojiConvertor=new EmojiConvertor,this.emojiConvertor.img_set="facebook",this.emojiConvertor.img_sets.facebook.path=this.sender.baseUrl+"/livechat-vinfast/assets/emoji_data/")}},{key:"replaceEmoji",value:function(e){return this.emojiConvertor?this.emojiConvertor.replace_unified(e):e}},{key:"updateClientID",value:function(e){this.clientID=e}},{key:"updateClientToken",value:function(e){this.clientToken=e}},{key:"renderPreviousChat",value:function(e){var t=this,n=this;(0,a.default)("#loadingOldMsg").show(),this.getOlderMsg().then((function(r){if(r.length){t.messages=[].concat(c(r),c(t.messages));for(var i=r.length-1;i>-1;i--)t.renderOlderMessage(i,r[i]);t.hideAllQuickreplyButtonsGroup(),setTimeout((function(){return n.scrollToLatestMessage(e)}),200)}(0,a.default)("#loadingOldMsg").hide()})).catch((function(){(0,a.default)("#loadingOldMsg").hide()})),(0,a.default)("#loadingOldMsg").hide()}},{key:"createParentContainer",value:function(e){var t="";if(e.sender===this.currentSender)return this.currentContainer;t=(0,a.default)('<div class="parent"></div>'),this.currentContainer=t,(0,a.default)(".chat_log").append(t)}},{key:"createOlderChatMsgContainer",value:function(e,t){var n="",r="";return t.sender===this.firstSender?this.firstContainer:("bot"===t.sender?(r=(0,a.default)('<span class="chat-message__avatar-frame">'+this.agent.user_name.escape()+"</span>"),n=(0,a.default)('<div class="chat-message"></div>')):(r=(0,a.default)('<span class="chat-message__avatar-frame"><img alt="avatar" class="chat-message__avatar" src="'+this.widgetConfig.avatar+'"></img>'+this.widgetConfig.name.escape()+"</span>"),n=(0,a.default)('<div class="chat-message--right chat-message"></div>')),this.firstContainer&&this.firstContainer.prepend(r),(0,a.default)(".chat_log").prepend(n),this.firstSender=t.sender,this.firstContainer=n,n)}},{key:"createChatMsgContainer",value:function(e,t){var n="";return t.sender===this.currentSender?this.currentContainer:(this.currentSender=t.sender,n="bot"===t.sender?(0,a.default)('<div class="chat-message"><span class="chat-message__avatar-frame"><img alt="avatar" class="chat-message__avatar" src="'+this.widgetConfig.avatar+'"></img>'+this.widgetConfig.name.escape()+"</span></div>"):(0,a.default)('<div class="chat-message--right chat-message"><span class="chat-message__avatar-frame">'+this.agent.user_name.escape()+"</span></div>"),(0,a.default)(".chat_log").append(n),this.currentContainer=n,n)}},{key:"renderOlderMessage",value:function(e,t){var n=this.createOlderChatMsgContainer(e,t);switch(t.msg.type){case"text":this.renderTextMessage(n,t.msg.value,"bot"===t.sender,!1,t.created_time);break;case"quick_reply":this.renderQuickReply(n,t.msg.value,!1);break;case"button":this.renderButtonMessage(n,t.msg.value,!1);break;case"media":this.renderImageMessage(n,t.msg.value,!1);break;case"carousel":this.renderCarouselMessage(n,t.msg.value,!1)}}},{key:"renderMessage",value:function(e,t){var n=this.createChatMsgContainer(e,t);switch(t.msg.type){case"text":this.renderTextMessage(n,t.msg.value,"bot"===t.sender,!0,t.created_time);break;case"quick_reply":this.renderQuickReply(n,t.msg.value,!0);break;case"button":this.renderButtonMessage(n,t.msg.value,!0);break;case"media":this.renderImageMessage(n,t.msg.value,!0);break;case"carousel":this.renderCarouselMessage(n,t.msg.value,!0);break;case"handover":this.renderTextMessage(n,t.msg.value,"bot"===t.sender,t.created_time)}}},{key:"renderTextMessage",value:function(e,t,n,r,o){var s=this;if(t)if("object"!==("undefined"===typeof t?"undefined":i(t))){var c="preview_"+(new Date).getTime();if(this.detectVinbaseLink(t,c),n){var u=t.split(" "),l=void 0;if(u.length>50){l=(0,a.default)('<div class="chat-message__text" title="'+this.parseTime(o)+'"><div id="'+c+'"></div><div class="chat-message_text_content">'+this.markdownToHtml(this.detectLink(u.slice(0,30).join(" "),n)).replace(/\n/g,"<br>")+"...</div></div>");var f=(0,a.default)("<div class='chat-message__show_more_btn'>Xem th\xeam</div>"),h=(0,a.default)("<div class='chat-message__hide_btn'>\u1ea8n b\u1edbt</div>");l.append(f),f.click((function(){l.empty(),s.detectVinbaseLink(t,c),l.append('<div id="'+c+'"></div><div class="chat-message_text_content">'+s.markdownToHtml(s.detectLink(t,n)).replace(/\n/g,"<br>")+"</div>"),l.append(h)})),h.click((function(){l.empty(),s.detectVinbaseLink(t,c),l.append('<div id="'+c+'"></div><div class="chat-message_text_content">'+s.markdownToHtml(s.detectLink(u.slice(0,30).join(" "),n)).replace(/\n/g,"<br>")+"...</div>"),l.append(f)}))}else l='<div class="chat-message__text" title="'+this.parseTime(o)+'"><div id="'+c+'"></div><div class="chat-message_text_content">'+this.markdownToHtml(this.detectLink(t,n)).replace(/\n/g,"<br>")+"</div></div>";r?e.append(l):e.prepend(l)}else{var p='<div class="chat-message__text" title="'+this.parseTime(o)+'"><div id="'+c+'"></div><div class="chat-message_text_content">'+this.markdownToHtml(this.detectLink(t,n)).replace(/\n/g,"<br>")+"</div>";r?e.append(p):e.prepend(p)}}else this.renderAttachMessage(e,t,n,r,o)}},{key:"renderAttachMessage",value:function(e,t,n,r,i){var o=this;if(t){var s=t.payload;switch(t.type){case"image":s.forEach((function(t){var n={media_type:"image",title:"",img_url:t.url,subtitle:"",buttons:[]};o.renderImageMessage(e,JSON.stringify(n),r)}));break;case"video":s.forEach((function(t){var n={media_type:"video",title:t.name,img_url:t.url,subtitle:"",buttons:[]};o.renderImageMessage(e,JSON.stringify(n),r)}));break;case"audio":s.forEach((function(t){var n={media_type:"image",title:t.name,img_url:t.url,subtitle:"",buttons:[]};o.renderImageMessage(e,JSON.stringify(n),r)}));break;case"file":s.forEach((function(t){var n={name:t.name,url:t.url,ext:t.ext,size:t.size};o.renderFileMessage(e,n,r)}))}}}},{key:"detectLink",value:function(e,t){var n=this,r=e.split("\n"),i=[];return r.forEach((function(e){var r="";e.split(" ").forEach((function(e){(e=e.escape()).startsWith("http://")||e.startsWith("https://")?r+=t?'<a href="'+e+'" target="_blank" style="background:inherit;color:#4080ff;text-decoration:underline">'+e+" </a>":'<a href="'+e+'" target="_blank" style="background:inherit;color:inherit;text-decoration:underline">'+e+" </a>":r+=n.replaceEmoji(e)+" "})),i.push(r)})),i.join("\n")}},{key:"detectVinbaseLink",value:function(e,t){var n=this,r="",i=e.replace(/\n/g," ").split(" "),o=[];i.forEach((function(e){((e=e.escape()).startsWith("http://")||e.startsWith("https://"))&&e.includes("api/v1/file/management")&&o.push(e)})),o.length?this.getLinkMetadata(o[0]).then((function(i){var s=i.fileName,c=i.fileExt,u=i.fileSize;if("image"===i.fileType)r+="<img src="+o[0]+" />";else{var l=(0,a.default)('<div style="display: flex; cursor:pointer;flex-direction:row; padding:10px"></div>'),f=n.convertSize(u);l.append('<div style="width: 50px;height: auto;background: #035554;border-radius: 5px;color: white;font-size: 18px;padding: 5px;text-align: center;">'+c+"</div>");var h=(0,a.default)("<div></div>");h.append('<div class="image-card-title" style=" max-width: 140px;overflow: hidden;text-overflow: ellipsis;margin: 0 0 0 10px;">'+s+"</div>"),h.append('<p class="image-card-subtitle">'+f+"</p>"),l.append(h),l.click((function(){(0,a.default)('<a href="'+e.url+'"></a>').click()})),r+=l.prop("outerHTML")}(0,a.default)("#"+t).html(r)})):(0,a.default)("#"+t).html(r)}},{key:"getLinkMetadata",value:function(e){var t=this;return new Promise((function(n,r){var i=e.split("/").pop();a.default.ajax({url:t.sender.baseUrl+"/api/v1/conversation/agents/files/"+i+"/detail",type:"GET",headers:{token:t.sender.agent.token},success:function(e){var t=e.data,r=t.name,i=r.split(".").pop().toLowerCase(),o=t.size,s=void 0;s=["png","jpg","jpeg","gif","svg","bmp","ico"].includes(i.toLowerCase())?"image":["mp4","ogg"].includes(i.toLowerCase())?"video":"file",n({fileName:r,fileExt:i,fileSize:o,fileType:s})},failure:function(){r()}})}))}},{key:"markdownToHtml",value:function(e){var t=e.split("\n"),n=[];return t.forEach((function(e){for(var t=e.split(" "),r=0,i="",o=[],s="normal";r<t.length;){var a=t[r];(a.startsWith("*")||a.startsWith("_"))&&"normal"===s&&(o.length&&(i+=o.join(" ")+" ",o=[]),a.startsWith("*")?(s="bold",a=a.slice(1)):(s="italic",a=a.slice(1))),a.endsWith("*")&&"bold"===s?(a=a.slice(0,-1),o.push(a),i+="<b>"+o.join(" ")+"</b> ",o=[],s="normal"):a.endsWith("_")&&"italic"===s?(a=a.slice(0,-1),o.push(a),i+="<i>"+o.join(" ")+"</i> ",o=[],s="normal"):o.push(a),r+=1}o.length&&(i+=""+o.join(" ")),n.push(i.trim())})),n.join("\n")}},{key:"renderQuickReply",value:function(e,t,n){var r=JSON.parse(t),i=void 0;r.title&&(i='<div class="chat-message__text"><div class="chat-message_text_content">'+r.title.replace(/\n/g,"<br>")+"</div></div>"),n?e.append(i):e.prepend(i),this.buildQuickReplyButtons(r.buttons,n)}},{key:"buildQuickReplyButtons",value:function(e,t){var n=this;if(e&&e.length){var r=(0,a.default)('<div class="quick-reply-wrapper"></div>'),i=(0,a.default)('<div class="quick-reply-button-group"></div>');e.forEach((function(e){var t=null,o="";"Custom"===e.btnStyle&&(o="border-color:"+e.bgColor+";color:"+e.textColor);var s="";e.img_url&&(s='<img src="'+e.img_url+'" style="width: 16px; height: 16px;margin-right:4px; border-radius: unset"/>'),"other_action"!==e.type&&"postback"!==e.type&&"phonenumber"!==e.type&&"link"!==e.type||(t=(0,a.default)('<button class="chip" style="'+o+'">'+s+n.replaceEmoji(e.title)+"</button>")),i.append(t),t.on("click",(function(t){if(t.preventDefault(),"phonenumber"===e.type)(0,a.default)('<a class="btn-msg-button" href="tel:'+e.value+'"></a>').click();else if("link"===e.type){(0,a.default)('<a class="btn-msg-button" href="'+e.value+'" target="_blank"></a>').click()}else{var i={sender:"user",msg:{type:"text",value:e.title,payload:e.value}};n.sendPostback(i)}r.css("display","none")}))})),r.append(i),t?this.currentContainer.append(r):this.firstContainer.append(r)}}},{key:"hideAllQuickreplyButtonsGroup",value:function(){(0,a.default)(".chat_log").find(".quick-reply-wrapper").css("display","none")}},{key:"renderButtonMessage",value:function(e,t,n){var r=this,i=JSON.parse(t),o=this,s=(0,a.default)('<div class="chat-message__text chat-message__button"></div>');s.append('<p class="btn-msg-title">'+this.markdownToHtml(i.title).replace(/\n/g,"<br>")+"</p>"),i.buttons.forEach((function(e){var t="";"Custom"===e.btnStyle&&(t="background:"+e.bgColor+";color:"+e.textColor);var n="";e.img_url&&(n='<img src="'+e.img_url+'" style="width: 16px; height: 16px;margin-right:4px; border-radius: unset" />');var i=null;if("other_action"===e.type||"postback"===e.type||"phonenumber"===e.type||"link"===e.type){if(e.messenger_extensions)if("side"===e.webview_position)i=(0,a.default)('<button class="btn-msg-button" link="'+e.value+'" style="'+t+'" sheight="'+e.webview_height_ratio+'" title="'+e.webview_title+'" btype="sidepanel">'+n+o.replaceEmoji(e.title)+"</button>");else{var c=e.value.includes("?")?e.value+"&openBy=chatbox&psid="+r.sender.clientID:e.value+"?openBy=chatbox&psid="+r.sender.clientID;i=(0,a.default)('<button \n                class="btn-msg-button iframe-lightbox-link"\n                href="'+c+'" \n                data-scrolling="true"\n                btype="popup"\n                data-src="'+c+'"\n                style="'+t+'"\n              >\n              '+n+o.replaceEmoji(e.title)+"\n              </button>")}else i=(0,a.default)('<button class="btn-msg-button" payload="'+e.value+'" style="'+t+'" btype="'+e.type+'">'+n+o.replaceEmoji(e.title)+"</button>");s.append(i)}})),s.find("button.btn-msg-button").on("click",(function(e){e.preventDefault(),(0,a.default)(e.target).blur();var t=(0,a.default)(e.target).attr("btype");if("phonenumber"===t)(0,a.default)('<a class="btn-msg-button" href="tel:'+(0,a.default)(e.target).attr("payload")+'"></a>').click();else if("link"===t){(0,a.default)('<a class="btn-msg-button" href="'+(0,a.default)(e.target).attr("payload")+'" target="_blank"></a>').click()}else if("popup"===t);else if("sidepanel"===t){(0,a.default)("#panel_container_iframe").attr("src",(0,a.default)(e.target).attr("link")),(0,a.default)("#panel_title").text((0,a.default)(e.target).attr("title"));var n=(0,a.default)(e.target).attr("sheight");(0,a.default)("#aip-chat-box-subpanel").addClass("is-visible"),"full"===n?((0,a.default)(".aip-chat-box-subpanel").removeClass("tall-panel"),(0,a.default)(".aip-chat-box-subpanel").removeClass("compact-panel")):"tall"===n?((0,a.default)(".aip-chat-box-subpanel").addClass("tall-panel"),(0,a.default)(".aip-chat-box-subpanel").removeClass("compact-panel")):((0,a.default)(".aip-chat-box-subpanel").removeClass("tall-panel"),(0,a.default)(".aip-chat-box-subpanel").addClass("compact-panel")),(0,a.default)("#aip-chat-box-subpanel").hasClass("is-visible")||(0,a.default)("#aip-chat-box-subpanel").addClass("is-visible")}else{var i={sender:"user",msg:{type:"text",value:(0,a.default)(e.target).text(),payload:(0,a.default)(e.target).attr("payload")}};r.sendPostback(i)}})),n?e.append(s):e.prepend(s),[].forEach.call(document.getElementsByClassName("iframe-lightbox-link"),(function(e){e.lightbox=new IframeLightbox(e,{scrolling:!0})}))}},{key:"buildImageCard",value:function(e){var t=this,n=this,r=void 0;if(e.media_type&&"video"===e.media_type){var i=e.img_url;i.endsWith("ogg")||i.includes(".ogg")||i.endsWith("mp4")||i.includes(".mp4")||i.includes("vinbase.ai/api/v1")?(r=(0,a.default)('<div class="video-card"></div>')).append('<video controls><source src="'+i+'"></source></video>'):(r=(0,a.default)('<div class="video-card"></div>'),i.includes("youtube.com/watch?v=")&&(i=i.replace("watch?v=","embed/")),i.includes("youtube.com/watch/?v=")&&(i=i.replace("watch/?v=","embed/")),i.includes("youtu.be/")&&(i=i.replace("youtu.be/","www.youtube.com/embed/")),r.append('<iframe src="'+i+'" style="border:none"></iframe>'))}else(r=(0,a.default)('<div class="image-card"></div>')).append('<img src="'+e.img_url+'"></img>');return""!==e.title&&r.append('<span class="image-card-title">'+n.replaceEmoji(e.title)+"</span>"),""!==e.subtitle&&r.append('<span class="image-card-subtitle">'+n.replaceEmoji(e.subtitle)+"</span>"),e.buttons.forEach((function(e){var t=null,i="";"Custom"===e.btnStyle&&(i="background:"+e.bgColor+";color:"+e.textColor);var o="";e.img_url&&(o='<img src="'+e.img_url+'" style="width: 16px; height: 16px;margin-right:4px; border-radius: unset" />'),"other_action"!==e.type&&"postback"!==e.type&&"phonenumber"!==e.type&&"link"!==e.type||(t=e.messenger_extensions?"side"===e.webview_position?(0,a.default)('<button class="btn-msg-button" link="'+e.value+'" style="'+i+'" sheight="'+e.webview_height_ratio+'" title="'+e.webview_title+'" btype="sidepanel">'+o+n.replaceEmoji(e.title)+"</button>"):(0,a.default)('<button \n                class="btn-msg-button iframe-lightbox-link" \n                href="'+e.value+'"\n                data-scrolling="true" \n                btype="popup"\n                data-src="'+e.value+'"\n                style="'+i+'">\n                '+o+" "+n.replaceEmoji(e.title)+"\n              </button>"):(0,a.default)('<button class="btn-msg-button" payload="'+e.value+'" style="'+i+'" btype="'+e.type+'">'+o+n.replaceEmoji(e.title)+"</button>")),r.append(t)})),r.find("button.btn-msg-button").on("click",(function(e){e.preventDefault(),(0,a.default)(e.target).blur();var n=(0,a.default)(e.target).attr("btype");if("phonenumber"===n)(0,a.default)('<a class="btn-msg-button" href="tel:'+(0,a.default)(e.target).attr("payload")+'"></a>').click();else if("link"===n){(0,a.default)('<a class="btn-msg-button" href="'+(0,a.default)(e.target).attr("payload")+'" target="_blank"></a>').click()}else if("popup"===n);else if("sidepanel"===n){(0,a.default)("#panel_container_iframe").attr("src",(0,a.default)(e.target).attr("link")),(0,a.default)("#panel_title").text((0,a.default)(e.target).attr("title"));var r=(0,a.default)(e.target).attr("sheight");(0,a.default)("#aip-chat-box-subpanel").addClass("is-visible"),"full"===r?((0,a.default)(".aip-chat-box-subpanel").removeClass("tall-panel"),(0,a.default)(".aip-chat-box-subpanel").removeClass("compact-panel")):"tall"===r?((0,a.default)(".aip-chat-box-subpanel").addClass("tall-panel"),(0,a.default)(".aip-chat-box-subpanel").removeClass("compact-panel")):((0,a.default)(".aip-chat-box-subpanel").removeClass("tall-panel"),(0,a.default)(".aip-chat-box-subpanel").addClass("compact-panel")),(0,a.default)("#aip-chat-box-subpanel").hasClass("is-visible")||(0,a.default)("#aip-chat-box-subpanel").addClass("is-visible")}else{var i={sender:"user",msg:{type:"text",value:(0,a.default)(e.target).text(),payload:(0,a.default)(e.target).attr("payload")}};t.sendPostback(i)}})),r}},{key:"renderImageMessage",value:function(e,t,n){var r=void 0;try{r=JSON.parse(t)}catch(e){r=void 0}if(r){var i=this.buildImageCard(r);n?e.append(i):e.prepend(i),[].forEach.call(document.getElementsByClassName("iframe-lightbox-link"),(function(e){e.lightbox=new IframeLightbox(e,{scrolling:!0})}))}}},{key:"renderCarouselMessage",value:function(e,t,n){var r=this,i=void 0;try{i=JSON.parse(t)}catch(e){i=[]}if(i&&i.length){var o=(0,a.default)('<div class="carousel-message"><a class="priv-card"><img src="'+this.sender.baseUrl+'/livechat-vinfast/assets/images/left-chevron.png"></img></a></div>'),s=(0,a.default)('<div class="carousel-message-cards-group"></div>');i.forEach((function(e){if(e.img_url&&e.title){var t=r.buildImageCard(e);s.append(t)}})),o.append(s),o.append('<a class="next-card"><img src="'+this.sender.baseUrl+'/livechat-vinfast/assets/images/right-chevron.png"></img></i></a>'),o.find("a.priv-card").on("click",(function(e){r.smoothScrollX(s,270,200,!0),o.find("a.next-card").hasClass("hide")&&o.find("a.next-card").removeClass("hide")})),o.find("a.next-card").on("click",(function(e){r.smoothScrollX(s,270,200,!1),o.find("a.priv-card").hasClass("hide")&&o.find("a.priv-card").removeClass("hide")})),o.find("a.priv-card").toggleClass("hide"),i.length<2&&o.find("a.next-card").toggleClass("hide"),s.on("scroll",(function(e){0!=e.target.scrollLeft||o.find("a.priv-card").hasClass("hide")||o.find("a.priv-card").addClass("hide"),e.target.scrollLeft+e.target.offsetWidth!=e.target.scrollWidth||o.find("a.next-card").hasClass("hide")||o.find("a.next-card").addClass("hide")})),n?e.append(o):e.prepend(o),[].forEach.call(document.getElementsByClassName("iframe-lightbox-link"),(function(e){e.lightbox=new IframeLightbox(e,{scrolling:!0})}))}}},{key:"renderFileMessage",value:function(e,t,n){if(t){var r=(0,a.default)('<div class="image-card" style="cursor:pointer;flex-direction:row; padding:10px"></div>'),i=t.name+"."+t.ext,o=this.convertSize(t.size);r.append('<div style="width: 50px;height: auto;background: #035554;border-radius: 5px;color: white;font-size: 18px;padding: 5px;text-align: center;">'+t.ext+"</div>");var s=(0,a.default)("<div></div>");s.append('<div class="image-card-title" style=" max-width: 140px;overflow: hidden;text-overflow: ellipsis;margin: 0 0 0 10px;">'+i+"</div>"),s.append('<p class="image-card-subtitle">'+o+"</p>"),r.append(s),r.click((function(){(0,a.default)('<a href="'+t.url+'"></a>').click()})),n?e.append(r):e.prepend(r)}}},{key:"convertSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=1024,r=t<0?0:t,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],o=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,o)).toFixed(r))+" "+i[o]}},{key:"appendMessage",value:function(e,t){e.created_time=parseInt(Date.now()/1e3),this.renderMessage(this.messages.length,e),this.messages.push(e),(0,a.default)("#botReplying").show(),this.scrollToLatestMessage(0)}},{key:"toggleTyping",value:function(e){e?(this.typingElement=(0,a.default)('<div class="typing-indicator"><span></span><span></span><span></span></div>'),(0,a.default)(".chat_log").append(this.typingElement)):this.typingElement&&this.typingElement.remove()}},{key:"scrollToLatestMessage",value:function(e){this.container||(this.container=(0,a.default)(".chat_log")[0]),this.container.scrollTop=this.container.scrollHeight-e}},{key:"smoothScrollX",value:function(e,t,n,r){var i=this;if(e&&!(n<0)){var o=parseInt(t/20,10);10==n&&(o=t-19*o),this.scrollToTimerCache=setTimeout((function(){n&&(r?e.scrollLeft(e.scrollLeft()-o):e.scrollLeft(e.scrollLeft()+o),i.smoothScrollX(e,t,n-10,r))}),10)}}},{key:"getOlderMsg",value:function(){var e=this,t=this;return new Promise((function(n,r){var i=t.messages&&t.messages.length?t.messages[0].id:"";a.default.ajax({url:t.sender.baseUrl+"/api/v1/conversation/agents/"+t.sender.agent.id+"/channels/"+t.sender.agent.cid+"/users/"+e.sender.clientID,method:"GET",headers:{token:t.agent.token,"Client-Token":t.sender.clientToken},data:{from_id:i,order:-1,size:15},success:function(e){if(0===e.error_code){var i=[],o=e.data.items.reverse();if(0===o.length)t.noMoreMessage=!0,r();else for(var s=0;s<o.length;s++){var a=o[s],c={id:a.id,msg:a.content[0],created_time:a.created_time};a.is_from_client?c.sender="user":c.sender="bot",i.push(c)}n(i)}else r()}})}))}},{key:"parseTime",value:function(e){var t=new Date(1e3*parseInt(e));return t.toLocaleDateString()+" "+t.toLocaleTimeString()}}]),e}();t.default=u},function(e,t,n){!function(e){var t=1,n=Array.prototype.slice,r=e.isFunction,i=function(e){return"string"==typeof e},o={},s={},a="onfocusin"in window,c={focus:"focusin",blur:"focusout"},u={mouseenter:"mouseover",mouseleave:"mouseout"};function l(e){return e._zid||(e._zid=t++)}function f(e,t,n,r){if((t=h(t)).ns)var i=(s=t.ns,new RegExp("(?:^| )"+s.replace(" "," .* ?")+"(?: |$)"));var s;return(o[l(e)]||[]).filter((function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||i.test(e.ns))&&(!n||l(e.fn)===l(n))&&(!r||e.sel==r)}))}function h(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function p(e,t){return e.del&&!a&&e.e in c||!!t}function d(e){return u[e]||a&&c[e]||e}function g(t,n,r,i,s,a,c){var f=l(t),g=o[f]||(o[f]=[]);n.split(/\s/).forEach((function(n){if("ready"==n)return e(document).ready(r);var o=h(n);o.fn=r,o.sel=s,o.e in u&&(r=function(t){var n=t.relatedTarget;if(!n||n!==this&&!e.contains(this,n))return o.fn.apply(this,arguments)}),o.del=a;var l=a||r;o.proxy=function(e){if(!(e=w(e)).isImmediatePropagationStopped()){e.data=i;var n=l.apply(t,void 0==e._args?[e]:[e].concat(e._args));return!1===n&&(e.preventDefault(),e.stopPropagation()),n}},o.i=g.length,g.push(o),"addEventListener"in t&&t.addEventListener(d(o.e),o.proxy,p(o,c))}))}function m(e,t,n,r,i){var s=l(e);(t||"").split(/\s/).forEach((function(t){f(e,t,n,r).forEach((function(t){delete o[s][t.i],"removeEventListener"in e&&e.removeEventListener(d(t.e),t.proxy,p(t,i))}))}))}s.click=s.mousedown=s.mouseup=s.mousemove="MouseEvents",e.event={add:g,remove:m},e.proxy=function(t,o){var s=2 in arguments&&n.call(arguments,2);if(r(t)){var a=function(){return t.apply(o,s?s.concat(n.call(arguments)):arguments)};return a._zid=l(t),a}if(i(o))return s?(s.unshift(t[o],t),e.proxy.apply(null,s)):e.proxy(t[o],t);throw new TypeError("expected function")},e.fn.bind=function(e,t,n){return this.on(e,t,n)},e.fn.unbind=function(e,t){return this.off(e,t)},e.fn.one=function(e,t,n,r){return this.on(e,t,n,r,1)};var v=function(){return!0},y=function(){return!1},b=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,_={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function w(t,n){if(n||!t.isDefaultPrevented){n||(n=t),e.each(_,(function(e,r){var i=n[e];t[e]=function(){return this[r]=v,i&&i.apply(n,arguments)},t[r]=y}));try{t.timeStamp||(t.timeStamp=Date.now())}catch(e){}(void 0!==n.defaultPrevented?n.defaultPrevented:"returnValue"in n?!1===n.returnValue:n.getPreventDefault&&n.getPreventDefault())&&(t.isDefaultPrevented=v)}return t}function C(e){var t,n={originalEvent:e};for(t in e)b.test(t)||void 0===e[t]||(n[t]=e[t]);return w(n,e)}e.fn.delegate=function(e,t,n){return this.on(t,e,n)},e.fn.undelegate=function(e,t,n){return this.off(t,e,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,o,s,a,c){var u,l,f=this;return t&&!i(t)?(e.each(t,(function(e,t){f.on(e,o,s,t,c)})),f):(i(o)||r(a)||!1===a||(a=s,s=o,o=void 0),void 0!==a&&!1!==s||(a=s,s=void 0),!1===a&&(a=y),f.each((function(r,i){c&&(u=function(e){return m(i,e.type,a),a.apply(this,arguments)}),o&&(l=function(t){var r,s=e(t.target).closest(o,i).get(0);if(s&&s!==i)return r=e.extend(C(t),{currentTarget:s,liveFired:i}),(u||a).apply(s,[r].concat(n.call(arguments,1)))}),g(i,t,a,s,o,l||u)})))},e.fn.off=function(t,n,o){var s=this;return t&&!i(t)?(e.each(t,(function(e,t){s.off(e,n,t)})),s):(i(n)||r(o)||!1===o||(o=n,n=void 0),!1===o&&(o=y),s.each((function(){m(this,t,o,n)})))},e.fn.trigger=function(t,n){return(t=i(t)||e.isPlainObject(t)?e.Event(t):w(t))._args=n,this.each((function(){t.type in c&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)}))},e.fn.triggerHandler=function(t,n){var r,o;return this.each((function(s,a){(r=C(i(t)?e.Event(t):t))._args=n,r.target=a,e.each(f(a,t.type||t),(function(e,t){if(o=t.proxy(r),r.isImmediatePropagationStopped())return!1}))})),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}})),e.Event=function(e,t){i(e)||(e=(t=e).type);var n=document.createEvent(s[e]||"Events"),r=!0;if(t)for(var o in t)"bubbles"==o?r=!!t[o]:n[o]=t[o];return n.initEvent(e,r,!0),w(n)}}(n(6))},function(e,t,n){!function(e){var t,n,r=+new Date,i=window.document,o=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,s=/^(?:text|application)\/javascript/i,a=/^(?:text|application)\/xml/i,c=/^\s*$/,u=i.createElement("a");function l(t,n,r,o){if(t.global)return function(t,n,r){var i=e.Event(n);return e(t).trigger(i,r),!i.isDefaultPrevented()}(n||i,r,o)}function f(e,t){var n=t.context;if(!1===t.beforeSend.call(n,e,t)||!1===l(t,n,"ajaxBeforeSend",[e,t]))return!1;l(t,n,"ajaxSend",[e,t])}function h(e,t,n,r){var i=n.context;n.success.call(i,e,"success",t),r&&r.resolveWith(i,[e,"success",t]),l(n,i,"ajaxSuccess",[t,n,e]),d("success",t,n)}function p(e,t,n,r,i){var o=r.context;r.error.call(o,n,t,e),i&&i.rejectWith(o,[n,t,e]),l(r,o,"ajaxError",[n,r,e||t]),d(t,n,r)}function d(t,n,r){var i=r.context;r.complete.call(i,n,t),l(r,i,"ajaxComplete",[n,r]),function(t){t.global&&!--e.active&&l(t,null,"ajaxStop")}(r)}function g(){}function m(e,t){return""==t?e:(e+"&"+t).replace(/[&?]{1,2}/,"?")}function v(t,n,r,i){return e.isFunction(n)&&(i=r,r=n,n=void 0),e.isFunction(r)||(i=r,r=void 0),{url:t,data:n,success:r,dataType:i}}u.href=window.location.href,e.active=0,e.ajaxJSONP=function(t,n){if(!("type"in t))return e.ajax(t);var o,s,a=t.jsonpCallback,c=(e.isFunction(a)?a():a)||"Zepto"+r++,u=i.createElement("script"),l=window[c],d=function(t){e(u).triggerHandler("error",t||"abort")},g={abort:d};return n&&n.promise(g),e(u).on("load error",(function(r,i){clearTimeout(s),e(u).off().remove(),"error"!=r.type&&o?h(o[0],g,t,n):p(null,i||"error",g,t,n),window[c]=l,o&&e.isFunction(l)&&l(o[0]),l=o=void 0})),!1===f(g,t)?(d("abort"),g):(window[c]=function(){o=arguments},u.src=t.url.replace(/\?(.+)=\?/,"?$1="+c),i.head.appendChild(u),t.timeout>0&&(s=setTimeout((function(){d("timeout")}),t.timeout)),g)},e.ajaxSettings={type:"GET",beforeSend:g,success:g,error:g,complete:g,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:g},e.ajax=function(r){var o,d,v=e.extend({},r||{}),y=e.Deferred&&e.Deferred();for(t in e.ajaxSettings)void 0===v[t]&&(v[t]=e.ajaxSettings[t]);!function(t){t.global&&0===e.active++&&l(t,null,"ajaxStart")}(v),v.crossDomain||((o=i.createElement("a")).href=v.url,o.href=o.href,v.crossDomain=u.protocol+"//"+u.host!==o.protocol+"//"+o.host),v.url||(v.url=window.location.toString()),(d=v.url.indexOf("#"))>-1&&(v.url=v.url.slice(0,d)),function(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=m(t.url,t.data),t.data=void 0)}(v);var b=v.dataType,_=/\?.+=\?/.test(v.url);if(_&&(b="jsonp"),!1!==v.cache&&(r&&!0===r.cache||"script"!=b&&"jsonp"!=b)||(v.url=m(v.url,"_="+Date.now())),"jsonp"==b)return _||(v.url=m(v.url,v.jsonp?v.jsonp+"=?":!1===v.jsonp?"":"callback=?")),e.ajaxJSONP(v,y);var w,C=v.accepts[b],k={},x=function(e,t){k[e.toLowerCase()]=[e,t]},S=/^([\w-]+:)\/\//.test(v.url)?RegExp.$1:window.location.protocol,E=v.xhr(),A=E.setRequestHeader;if(y&&y.promise(E),v.crossDomain||x("X-Requested-With","XMLHttpRequest"),x("Accept",C||"*/*"),(C=v.mimeType||C)&&(C.indexOf(",")>-1&&(C=C.split(",",2)[0]),E.overrideMimeType&&E.overrideMimeType(C)),(v.contentType||!1!==v.contentType&&v.data&&"GET"!=v.type.toUpperCase())&&x("Content-Type",v.contentType||"application/x-www-form-urlencoded"),v.headers)for(n in v.headers)x(n,v.headers[n]);if(E.setRequestHeader=x,E.onreadystatechange=function(){if(4==E.readyState){E.onreadystatechange=g,clearTimeout(w);var t,n=!1;if(E.status>=200&&E.status<300||304==E.status||0==E.status&&"file:"==S){if(b=b||function(e){return e&&(e=e.split(";",2)[0]),e&&("text/html"==e?"html":"application/json"==e?"json":s.test(e)?"script":a.test(e)&&"xml")||"text"}(v.mimeType||E.getResponseHeader("content-type")),"arraybuffer"==E.responseType||"blob"==E.responseType)t=E.response;else{t=E.responseText;try{t=function(e,t,n){if(n.dataFilter==g)return e;var r=n.context;return n.dataFilter.call(r,e,t)}(t,b,v),"script"==b?(0,eval)(t):"xml"==b?t=E.responseXML:"json"==b&&(t=c.test(t)?null:e.parseJSON(t))}catch(e){n=e}if(n)return p(n,"parsererror",E,v,y)}h(t,E,v,y)}else p(E.statusText||null,E.status?"error":"abort",E,v,y)}},!1===f(E,v))return E.abort(),p(null,"abort",E,v,y),E;var B=!("async"in v)||v.async;if(E.open(v.type,v.url,B,v.username,v.password),v.xhrFields)for(n in v.xhrFields)E[n]=v.xhrFields[n];for(n in k)A.apply(E,k[n]);return v.timeout>0&&(w=setTimeout((function(){E.onreadystatechange=g,E.abort(),p(null,"timeout",E,v,y)}),v.timeout)),E.send(v.data?v.data:null),E},e.get=function(){return e.ajax(v.apply(null,arguments))},e.post=function(){var t=v.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=v.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,r){if(!this.length)return this;var i,s=this,a=t.split(/\s/),c=v(t,n,r),u=c.success;return a.length>1&&(c.url=a[0],i=a[1]),c.success=function(t){s.html(i?e("<div>").html(t.replace(o,"")).find(i):t),u&&u.apply(s,arguments)},e.ajax(c),this};var y=encodeURIComponent;e.param=function(t,n){var r=[];return r.add=function(t,n){e.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(y(t)+"="+y(n))},function t(n,r,i,o){var s,a=e.isArray(r),c=e.isPlainObject(r);e.each(r,(function(r,u){s=e.type(u),o&&(r=i?o:o+"["+(c||"object"==s||"array"==s?r:"")+"]"),!o&&a?n.add(u.name,u.value):"array"==s||!i&&"object"==s?t(n,u,i,r):n.add(r,u)}))}(r,t,n),r.join("&").replace(/%20/g,"+")}}(n(6))},function(e,t,n){var r,i=n(6);(r=i).fn.serializeArray=function(){var e,t,n=[],i=function(t){if(t.forEach)return t.forEach(i);n.push({name:e,value:t})};return this[0]&&r.each(this[0].elements,(function(n,o){t=o.type,(e=o.name)&&"fieldset"!=o.nodeName.toLowerCase()&&!o.disabled&&"submit"!=t&&"reset"!=t&&"button"!=t&&"file"!=t&&("radio"!=t&&"checkbox"!=t||o.checked)&&i(r(o).val())})),n},r.fn.serialize=function(){var e=[];return this.serializeArray().forEach((function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))})),e.join("&")},r.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var t=r.Event("submit");this.eq(0).trigger(t),t.isDefaultPrevented()||this.get(0).submit()}return this}},function(e,t){!function(){try{getComputedStyle(void 0)}catch(t){var e=getComputedStyle;window.getComputedStyle=function(t,n){try{return e(t,n)}catch(e){return null}}}}()}]);